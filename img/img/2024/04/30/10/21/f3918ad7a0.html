<html><head>
 <base href="http://file.custom.com"><link rel="stylesheet" href="http://res.wx.qq.com/mmbizappmsg/zh_CN/htmledition/js/assets/tencent_portfolio_light.llgarzvo2231b06e.css" reportloaderror><meta charset="UTF-8"><meta name="wechat-enable-text-zoom-em" content="true"><meta http-equiv="X-UA-Compatible" content="IE=edge"></head><body id="activity-detail" class="zh_CN mm_appmsg  appmsg_skin_default appmsg_style_default "><div id="js_article" class="rich_media">  <div id="js_top_ad_area" class="top_banner"></div><div class="rich_media_inner"><div id="page-content" class="rich_media_area_primary"> <div class="rich_media_area_primary_inner"><h1 class="rich_media_title " id="activity-name">基于APB协议UVM验证环境的搭建！</h1><div id="meta_content" class="rich_media_meta_list"><span class="rich_media_meta rich_media_meta_nickname" id="profileBt"> <a href="javascript:void(0);" class="wx_tap_link js_wx_tap_highlight weui-wa-hotarea" id="js_name"> 酒酒聊IC编程 </a>
  <div id="js_profile_qrcode" aria-hidden="true" class="profile_container" style="display:none;">
   <div class="profile_inner"><strong class="profile_nickname">酒酒聊IC编程</strong> <img class="profile_avatar" id="js_profile_qrcode_img" src="" alt="">
    <p class="profile_meta"><label class="profile_meta_label">微信号</label> <span class="profile_meta_value">gh_f1dc54d9072b</span></p>
    <p class="profile_meta"><label class="profile_meta_label">功能介绍</label> <span class="profile_meta_value">自学leetcode算法刷题，双修IC验证，懂点编程斩获BAT的后端开发offer，懂点IC斩获一些IC大厂offer：zeku、展锐、华为、寒武纪、地平线，程序媛 and IC媛双料博主。</span></p>
   </div><span class="profile_arrow_wrp" id="js_profile_arrow_wrp"> <i class="profile_arrow arrow_out"></i> <i class="profile_arrow arrow_in"></i> </span>
  </div></span>  <em id="js_ip_wording_wrp" class="rich_media_meta rich_media_meta_text" role="option" aria-labelledby="js_a11y_op_ip_wording js_ip_wording" style="display: none;"><span id="js_a11y_op_ip_wording" aria-hidden="true">发表于</span><span aria-hidden="true" id="js_ip_wording"></span></em>
</div><div class="rich_media_content js_underline_content
                       autoTypeSetting24psection
            " id="js_content" style="visibility: visible;">
 <section data-tool="mdnice编辑器" data-website="https://www.mdnice.com" style="padding-right: 10px;padding-left: 10px;text-align: left;line-height: 1.6;letter-spacing: 0.034em;color: rgb(63, 63, 63);font-size: 16px;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif;">
  <h1 data-tool="mdnice编辑器" style="font-weight: bold;color: black;font-size: 24px;text-align: center;background-image: url(&quot;http://file.custom.com/view/125794260131774464&quot;);background-position: center top;background-repeat: no-repeat;background-size: 75px;line-height: 95px;margin-top: 38px;margin-bottom: 10px;"><span style="display: none;"></span><span style="font-size: 20px;color: #48b378;border-bottom: 2px solid #2e7950;">APB协议UVM验证环境的搭建</span></h1>
  <h1 data-tool="mdnice编辑器" style="font-weight: bold;color: black;font-size: 24px;text-align: center;background-image: url(&quot;http://file.custom.com/view/125794260131774464&quot;);background-position: center top;background-repeat: no-repeat;background-size: 75px;line-height: 95px;margin-top: 38px;margin-bottom: 10px;"><span style="display: none;"></span><span style="font-size: 20px;color: #48b378;border-bottom: 2px solid #2e7950;">一、编译文件</span></h1>
  <p data-tool="mdnice编辑器" style="padding-bottom: 8px;padding-top: 1em;color: rgb(74, 74, 74);line-height: 1.75em;">只需编译这两个文件即可<br><img class="rich_pages wxw-img" data-ratio="1.005514705882353" src="http://file.custom.com/view/125794260459978752" data-type="png" data-w="544" style="display: block;margin-right: auto;margin-left: auto;border-radius: 4px;margin-bottom: 25px;"></p>
  <p data-tool="mdnice编辑器" style="padding-bottom: 8px;padding-top: 1em;color: rgb(74, 74, 74);line-height: 1.75em;"><strong style="line-height: 1.75em;">apb_pkg.sv</strong></p>
  <p data-tool="mdnice编辑器" style="padding-bottom: 8px;padding-top: 1em;color: rgb(74, 74, 74);line-height: 1.75em;">里面包含了"apb.svh"，即编译apb_pkg.sv这个文件的同时，也会编译所需要的所有的头文件。</p>
  <pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block;background: url(&quot;http://file.custom.com/view/125794260081442816&quot;) 10px 10px / 40px no-repeat rgb(40, 44, 52);height: 30px;width: 100%;margin-bottom: -7px;border-radius: 5px;"></span><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;">`ifndef&nbsp;APB_PKG_SV<br>`define&nbsp;APB_PKG_SV<br><br>package&nbsp;apb_pkg;<br><br><span style="color: #c678dd;line-height: 26px;">import</span>&nbsp;uvm_pkg::*;<br>`include&nbsp;<span style="color: #98c379;line-height: 26px;">"uvm_macros.svh"</span><br><br>`include&nbsp;<span style="color: #98c379;line-height: 26px;">"apb.svh"</span><br><br>endpackage&nbsp;:&nbsp;apb_pkg<br><br>&nbsp;&nbsp;&nbsp;<br>`endif&nbsp;<span style="color: #5c6370;font-style: italic;line-height: 26px;">//&nbsp;&nbsp;`ifndef&nbsp;APB_PKG_SV</span><br><br></code></pre>
  <p data-tool="mdnice编辑器" style="padding-bottom: 8px;padding-top: 1em;color: rgb(74, 74, 74);line-height: 1.75em;"><strong style="line-height: 1.75em;">apb.svh</strong></p>
  <pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block;background: url(&quot;http://file.custom.com/view/125794260081442816&quot;) 10px 10px / 40px no-repeat rgb(40, 44, 52);height: 30px;width: 100%;margin-bottom: -7px;border-radius: 5px;"></span><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;">`ifndef&nbsp;APB_SVH<br>`define&nbsp;APB_SVH<br><br><br>`include&nbsp;<span style="color: #98c379;line-height: 26px;">"apb_transfer.sv"</span><br>`include&nbsp;<span style="color: #98c379;line-height: 26px;">"apb_config.sv"</span><br><br><span style="color: #5c6370;font-style: italic;line-height: 26px;">//master所有的头文件</span><br>`include&nbsp;<span style="color: #98c379;line-height: 26px;">"apb_master_driver.svh"</span><br>`include&nbsp;<span style="color: #98c379;line-height: 26px;">"apb_master_monitor.svh"</span><br>`include&nbsp;<span style="color: #98c379;line-height: 26px;">"apb_master_sequencer.svh"</span><br>`include&nbsp;<span style="color: #98c379;line-height: 26px;">"apb_master_agent.svh"</span><br><br><span style="color: #5c6370;font-style: italic;line-height: 26px;">//slave所有的头文件</span><br>`include&nbsp;<span style="color: #98c379;line-height: 26px;">"apb_slave_driver.svh"</span><br>`include&nbsp;<span style="color: #98c379;line-height: 26px;">"apb_slave_monitor.svh"</span><br>`include&nbsp;<span style="color: #98c379;line-height: 26px;">"apb_slave_sequencer.svh"</span><br>`include&nbsp;<span style="color: #98c379;line-height: 26px;">"apb_slave_agent.svh"</span><br><br><span style="color: #5c6370;font-style: italic;line-height: 26px;">//master头文件里面具体的实现方法</span><br>`include&nbsp;<span style="color: #98c379;line-height: 26px;">"apb_master_driver.sv"</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>`include&nbsp;<span style="color: #98c379;line-height: 26px;">"apb_master_monitor.sv"</span><br>`include&nbsp;<span style="color: #98c379;line-height: 26px;">"apb_master_sequencer.sv"</span><br>`include&nbsp;<span style="color: #98c379;line-height: 26px;">"apb_master_agent.sv"</span><br>`include&nbsp;<span style="color: #98c379;line-height: 26px;">"apb_master_seq_lib.sv"</span><br><br><span style="color: #5c6370;font-style: italic;line-height: 26px;">//slave头文件里面具体的实现方法</span><br>`include&nbsp;<span style="color: #98c379;line-height: 26px;">"apb_slave_driver.sv"</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>`include&nbsp;<span style="color: #98c379;line-height: 26px;">"apb_slave_monitor.sv"</span><br>`include&nbsp;<span style="color: #98c379;line-height: 26px;">"apb_slave_sequencer.sv"</span><br>`include&nbsp;<span style="color: #98c379;line-height: 26px;">"apb_slave_agent.sv"</span><br>`include&nbsp;<span style="color: #98c379;line-height: 26px;">"apb_slave_seq_lib.sv"</span><br><br><br><br>&nbsp;&nbsp;&nbsp;<br>`endif&nbsp;<span style="color: #5c6370;font-style: italic;line-height: 26px;">//&nbsp;&nbsp;`ifndef&nbsp;APB_SVH</span><br></code></pre>
  <p data-tool="mdnice编辑器" style="padding-bottom: 8px;padding-top: 1em;color: rgb(74, 74, 74);line-height: 1.75em;"><strong style="line-height: 1.75em;">再来编译apb_tb.sv文件</strong></p>
  <p data-tool="mdnice编辑器" style="padding-bottom: 8px;padding-top: 1em;color: rgb(74, 74, 74);line-height: 1.75em;">编译的同时，也会编译"apb_tests.svh"、"apb_if.sv"这两个文件。例化协议接口，配置顶层环境的master和slave，默认执行“apb_single_transaction_test”这个测试用例。</p>
  <pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block;background: url(&quot;http://file.custom.com/view/125794260081442816&quot;) 10px 10px / 40px no-repeat rgb(40, 44, 52);height: 30px;width: 100%;margin-bottom: -7px;border-radius: 5px;"></span><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;">`timescale&nbsp;<span style="color: #d19a66;line-height: 26px;">1</span>ps/<span style="color: #d19a66;line-height: 26px;">1</span>ps<br><span style="color: #c678dd;line-height: 26px;">import</span>&nbsp;uvm_pkg::*;<br>`include&nbsp;<span style="color: #98c379;line-height: 26px;">"uvm_macros.svh"</span><br>`include&nbsp;<span style="color: #98c379;line-height: 26px;">"apb_tests.svh"</span><br>`include&nbsp;<span style="color: #98c379;line-height: 26px;">"apb_if.sv"</span><br><span style="color: #c678dd;line-height: 26px;">module</span>&nbsp;apb_tb;<br>&nbsp;&nbsp;bit&nbsp;clk,&nbsp;rstn;<br>&nbsp;&nbsp;initial&nbsp;begin<br>&nbsp;&nbsp;&nbsp;&nbsp;fork<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;begin&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;forever&nbsp;#<span style="color: #d19a66;line-height: 26px;">5</span>ns&nbsp;clk&nbsp;=&nbsp;!clk;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;begin<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#<span style="color: #d19a66;line-height: 26px;">100</span>ns;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rstn&nbsp;&lt;=&nbsp;<span style="color: #d19a66;line-height: 26px;">1'b</span>1;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#<span style="color: #d19a66;line-height: 26px;">100</span>ns;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rstn&nbsp;&lt;=&nbsp;<span style="color: #d19a66;line-height: 26px;">1'b</span>0;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#<span style="color: #d19a66;line-height: 26px;">100</span>ns;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rstn&nbsp;&lt;=&nbsp;<span style="color: #d19a66;line-height: 26px;">1'b</span>1;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="line-height: 26px;">end<br>&nbsp;&nbsp;&nbsp;&nbsp;join_none<br>&nbsp;&nbsp;end<br><br>&nbsp;&nbsp;apb_if&nbsp;<span style="color: #61aeee;line-height: 26px;">intf</span><span style="line-height: 26px;">(clk,&nbsp;rstn)</span></span>;<br><br>&nbsp;&nbsp;initial&nbsp;begin<br>&nbsp;&nbsp;&nbsp;&nbsp;uvm_config_db#(<span style="color: #c678dd;line-height: 26px;">virtual</span>&nbsp;apb_if)::<span style="color: #e6c07b;line-height: 26px;">set</span>(uvm_root::get(),&nbsp;<span style="color: #98c379;line-height: 26px;">"uvm_test_top.env.mst"</span>,&nbsp;<span style="color: #98c379;line-height: 26px;">"vif"</span>,&nbsp;intf);<br>&nbsp;&nbsp;&nbsp;&nbsp;uvm_config_db#(<span style="color: #c678dd;line-height: 26px;">virtual</span>&nbsp;apb_if)::<span style="color: #e6c07b;line-height: 26px;">set</span>(uvm_root::get(),&nbsp;<span style="color: #98c379;line-height: 26px;">"uvm_test_top.env.slv"</span>,&nbsp;<span style="color: #98c379;line-height: 26px;">"vif"</span>,&nbsp;intf);<br>&nbsp;&nbsp;&nbsp;&nbsp;run_test(<span style="color: #98c379;line-height: 26px;">"apb_single_transaction_test"</span>);<br>&nbsp;&nbsp;end<br><br>endmodule<br><br></code></pre>
  <p data-tool="mdnice编辑器" style="padding-bottom: 8px;padding-top: 1em;color: rgb(74, 74, 74);line-height: 1.75em;"><strong style="line-height: 1.75em;">apb_tests.svh</strong></p>
  <pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block;background: url(&quot;http://file.custom.com/view/125794260081442816&quot;) 10px 10px / 40px no-repeat rgb(40, 44, 52);height: 30px;width: 100%;margin-bottom: -7px;border-radius: 5px;"></span><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;">`ifndef&nbsp;APB_TESTS_SV<br>`define&nbsp;APB_TESTS_SV<br><br><span style="color: #c678dd;line-height: 26px;">import</span>&nbsp;apb_pkg::*;<br><br><span style="line-height: 26px;"><span style="color: #c678dd;line-height: 26px;">class</span>&nbsp;<span style="color: #e6c07b;line-height: 26px;">apb_env</span>&nbsp;<span style="color: #e6c07b;line-height: 26px;">extends</span>&nbsp;<span style="color: #e6c07b;line-height: 26px;">uvm_env</span>;</span><br>&nbsp;&nbsp;apb_master_agent&nbsp;mst;<br>&nbsp;&nbsp;apb_slave_agent&nbsp;slv;<br>&nbsp;&nbsp;`uvm_component_utils(apb_env)<br>&nbsp;&nbsp;<span style="line-height: 26px;">function&nbsp;<span style="color: #61aeee;line-height: 26px;">new</span><span style="line-height: 26px;">(<span style="color: #e6c07b;line-height: 26px;">string</span>&nbsp;name,&nbsp;uvm_component&nbsp;parent)</span></span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;super.<span style="color: #c678dd;line-height: 26px;">new</span>(name,&nbsp;parent);<br>&nbsp;&nbsp;<span style="line-height: 26px;">endfunction<br>&nbsp;&nbsp;function&nbsp;<span style="color: #c678dd;line-height: 26px;">void</span>&nbsp;<span style="color: #61aeee;line-height: 26px;">build_phase</span><span style="line-height: 26px;">(uvm_phase&nbsp;phase)</span></span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;super.build_phase(phase);<br>&nbsp;&nbsp;&nbsp;&nbsp;mst&nbsp;=&nbsp;apb_master_agent::type_id::create(<span style="color: #98c379;line-height: 26px;">"mst"</span>,&nbsp;<span style="color: #c678dd;line-height: 26px;">this</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;slv&nbsp;=&nbsp;apb_slave_agent::type_id::create(<span style="color: #98c379;line-height: 26px;">"slv"</span>,&nbsp;<span style="color: #c678dd;line-height: 26px;">this</span>);<br>&nbsp;&nbsp;endfunction<br>endclass<br><br><span style="line-height: 26px;"><span style="color: #c678dd;line-height: 26px;">class</span>&nbsp;<span style="color: #e6c07b;line-height: 26px;">apb_base_test</span>&nbsp;<span style="color: #e6c07b;line-height: 26px;">extends</span>&nbsp;<span style="color: #e6c07b;line-height: 26px;">uvm_test</span>;</span><br>&nbsp;&nbsp;apb_env&nbsp;env;<br>&nbsp;&nbsp;`uvm_component_utils(apb_base_test)<br>&nbsp;&nbsp;<span style="line-height: 26px;">function&nbsp;<span style="color: #61aeee;line-height: 26px;">new</span><span style="line-height: 26px;">(<span style="color: #e6c07b;line-height: 26px;">string</span>&nbsp;name,&nbsp;uvm_component&nbsp;parent)</span></span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;super.<span style="color: #c678dd;line-height: 26px;">new</span>(name,&nbsp;parent);<br>&nbsp;&nbsp;<span style="line-height: 26px;">endfunction<br>&nbsp;&nbsp;function&nbsp;<span style="color: #c678dd;line-height: 26px;">void</span>&nbsp;<span style="color: #61aeee;line-height: 26px;">build_phase</span><span style="line-height: 26px;">(uvm_phase&nbsp;phase)</span></span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;super.build_phase(phase);<br>&nbsp;&nbsp;&nbsp;&nbsp;env&nbsp;=&nbsp;apb_env::type_id::create(<span style="color: #98c379;line-height: 26px;">"env"</span>,&nbsp;<span style="color: #c678dd;line-height: 26px;">this</span>);<br>&nbsp;&nbsp;endfunction<br>endclass<br><br><span style="line-height: 26px;"><span style="color: #c678dd;line-height: 26px;">class</span>&nbsp;<span style="color: #e6c07b;line-height: 26px;">apb_base_test_sequence</span>&nbsp;<span style="color: #e6c07b;line-height: 26px;">extends</span>&nbsp;<span style="color: #e6c07b;line-height: 26px;">uvm_sequence</span>&nbsp;#(<span style="color: #e6c07b;line-height: 26px;">apb_transfer</span>);</span><br>&nbsp;&nbsp;bit[<span style="color: #d19a66;line-height: 26px;">31</span>:<span style="color: #d19a66;line-height: 26px;">0</span>]&nbsp;mem[bit[<span style="color: #d19a66;line-height: 26px;">31</span>:<span style="color: #d19a66;line-height: 26px;">0</span>]];&nbsp;&nbsp;<span style="color: #5c6370;font-style: italic;line-height: 26px;">//关联数组mem，用来master和slave之间的数据比对，test和slave中都有一个mem</span><br>&nbsp;&nbsp;`uvm_object_utils(apb_base_test_sequence)<br>&nbsp;&nbsp;<span style="line-height: 26px;">function&nbsp;<span style="color: #61aeee;line-height: 26px;">new</span><span style="line-height: 26px;">(<span style="color: #e6c07b;line-height: 26px;">string</span>&nbsp;name=<span style="color: #98c379;line-height: 26px;">""</span>)</span></span>;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;super.<span style="color: #c678dd;line-height: 26px;">new</span>(name);<br>&nbsp;&nbsp;endfunction&nbsp;:&nbsp;<span style="color: #c678dd;line-height: 26px;">new</span><br>&nbsp;&nbsp;function&nbsp;bit&nbsp;check_mem_data(bit[<span style="color: #d19a66;line-height: 26px;">31</span>:<span style="color: #d19a66;line-height: 26px;">0</span>]&nbsp;addr,&nbsp;bit[<span style="color: #d19a66;line-height: 26px;">31</span>:<span style="color: #d19a66;line-height: 26px;">0</span>]&nbsp;data);<br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">if</span>(mem.exists(addr))&nbsp;<span style="line-height: 26px;">begin<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #61aeee;line-height: 26px;">if</span><span style="line-height: 26px;">(data&nbsp;!=&nbsp;mem[addr])</span>&nbsp;begin<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`<span style="color: #61aeee;line-height: 26px;">uvm_error</span><span style="line-height: 26px;">(<span style="color: #98c379;line-height: 26px;">"CMPDATA"</span>,&nbsp;$sformatf(<span style="color: #98c379;line-height: 26px;">"addr&nbsp;32'h%8x,&nbsp;READ&nbsp;DATA&nbsp;expected&nbsp;32'h%8x&nbsp;!=&nbsp;actual&nbsp;32'h%8x"</span>,&nbsp;addr,&nbsp;mem[addr],&nbsp;data))</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">return</span>&nbsp;0</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">else</span>&nbsp;begin<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`uvm_info(<span style="color: #98c379;line-height: 26px;">"CMPDATA"</span>,&nbsp;$sformatf(<span style="color: #98c379;line-height: 26px;">"addr&nbsp;32'h%8x,&nbsp;READ&nbsp;DATA&nbsp;32'h%8x&nbsp;comparing&nbsp;success!"</span>,&nbsp;addr,&nbsp;data),&nbsp;UVM_LOW)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">return</span>&nbsp;<span style="color: #d19a66;line-height: 26px;">1</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="line-height: 26px;">end<br>&nbsp;&nbsp;&nbsp;&nbsp;end<br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">else</span>&nbsp;begin<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #61aeee;line-height: 26px;">if</span><span style="line-height: 26px;">(data&nbsp;!=&nbsp;<span style="color: #d19a66;line-height: 26px;">0</span>)</span>&nbsp;begin<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`<span style="color: #61aeee;line-height: 26px;">uvm_error</span><span style="line-height: 26px;">(<span style="color: #98c379;line-height: 26px;">"CMPDATA"</span>,&nbsp;$sformatf(<span style="color: #98c379;line-height: 26px;">"addr&nbsp;32'h%8x,&nbsp;READ&nbsp;DATA&nbsp;expected&nbsp;32'h00000000&nbsp;!=&nbsp;actual&nbsp;32'h%8x"</span>,&nbsp;addr,&nbsp;data))</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">return</span>&nbsp;0</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">else</span>&nbsp;begin<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`uvm_info(<span style="color: #98c379;line-height: 26px;">"CMPDATA"</span>,&nbsp;$sformatf(<span style="color: #98c379;line-height: 26px;">"addr&nbsp;32'h%8x,&nbsp;READ&nbsp;DATA&nbsp;32'h%8x&nbsp;comparing&nbsp;success!"</span>,&nbsp;addr,&nbsp;data),&nbsp;UVM_LOW)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">return</span>&nbsp;<span style="color: #d19a66;line-height: 26px;">1</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end<br>&nbsp;&nbsp;&nbsp;&nbsp;end<br>&nbsp;&nbsp;endfunction:&nbsp;<span style="line-height: 26px;">check_mem_data<br><br>&nbsp;&nbsp;task&nbsp;<span style="color: #61aeee;line-height: 26px;">wait_reset_release</span><span style="line-height: 26px;">()</span></span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;@(negedge&nbsp;apb_tb.rstn);<br>&nbsp;&nbsp;&nbsp;&nbsp;@(posedge&nbsp;apb_tb.rstn);<br>&nbsp;&nbsp;<span style="line-height: 26px;">endtask<br><br>&nbsp;&nbsp;task&nbsp;<span style="color: #61aeee;line-height: 26px;">wait_cycles</span><span style="line-height: 26px;">(<span style="color: #c678dd;line-height: 26px;">int</span>&nbsp;n)</span></span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;repeat(n)&nbsp;@(posedge&nbsp;apb_tb.clk);<br>&nbsp;&nbsp;endtask<br><br>&nbsp;&nbsp;function&nbsp;bit[<span style="color: #d19a66;line-height: 26px;">31</span>:<span style="color: #d19a66;line-height: 26px;">0</span>]&nbsp;get_rand_addr();<br>&nbsp;&nbsp;&nbsp;&nbsp;bit[<span style="color: #d19a66;line-height: 26px;">31</span>:<span style="color: #d19a66;line-height: 26px;">0</span>]&nbsp;addr;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">void</span><span style="color: #d19a66;line-height: 26px;">'</span>(<span style="color: #e6c07b;line-height: 26px;">std</span>::randomize(addr)&nbsp;with&nbsp;{addr[<span style="color: #d19a66;line-height: 26px;">31</span>:<span style="color: #d19a66;line-height: 26px;">12</span>]&nbsp;==&nbsp;<span style="color: #d19a66;line-height: 26px;">0</span>;&nbsp;addr[<span style="color: #d19a66;line-height: 26px;">1</span>:<span style="color: #d19a66;line-height: 26px;">0</span>]&nbsp;==&nbsp;<span style="color: #d19a66;line-height: 26px;">0</span>;});<br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">return</span>&nbsp;addr;<br>&nbsp;&nbsp;endfunction<br>endclass<br><br><span style="line-height: 26px;"><span style="color: #c678dd;line-height: 26px;">class</span>&nbsp;<span style="color: #e6c07b;line-height: 26px;">apb_single_transaction_sequence</span>&nbsp;<span style="color: #e6c07b;line-height: 26px;">extends</span>&nbsp;<span style="color: #e6c07b;line-height: 26px;">apb_base_test_sequence</span>;</span><br>&nbsp;&nbsp;apb_master_single_write_sequence&nbsp;single_write_seq;<br>&nbsp;&nbsp;apb_master_single_read_sequence&nbsp;single_read_seq;<br>&nbsp;&nbsp;apb_master_write_read_sequence&nbsp;write_read_seq;<br>&nbsp;&nbsp;rand&nbsp;<span style="color: #c678dd;line-height: 26px;">int</span>&nbsp;test_num&nbsp;=&nbsp;<span style="color: #d19a66;line-height: 26px;">100</span>;<br>&nbsp;&nbsp;constraint&nbsp;cstr{<br>&nbsp;&nbsp;&nbsp;&nbsp;soft&nbsp;test_num&nbsp;==&nbsp;<span style="color: #d19a66;line-height: 26px;">100</span>;<br>&nbsp;&nbsp;}<br>&nbsp;&nbsp;`uvm_object_utils(apb_single_transaction_sequence)&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;<span style="line-height: 26px;">function&nbsp;<span style="color: #61aeee;line-height: 26px;">new</span><span style="line-height: 26px;">(<span style="color: #e6c07b;line-height: 26px;">string</span>&nbsp;name=<span style="color: #98c379;line-height: 26px;">""</span>)</span></span>;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;super.<span style="color: #c678dd;line-height: 26px;">new</span>(name);<br>&nbsp;&nbsp;endfunction&nbsp;:&nbsp;<span style="color: #c678dd;line-height: 26px;">new</span><br>&nbsp;&nbsp;task&nbsp;body();<br>&nbsp;&nbsp;&nbsp;&nbsp;bit[<span style="color: #d19a66;line-height: 26px;">31</span>:<span style="color: #d19a66;line-height: 26px;">0</span>]&nbsp;addr;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">this</span>.wait_reset_release();<br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">this</span>.wait_cycles(<span style="color: #d19a66;line-height: 26px;">10</span>);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #5c6370;font-style: italic;line-height: 26px;">//&nbsp;TEST&nbsp;continous&nbsp;write&nbsp;transaction</span><br>&nbsp;&nbsp;&nbsp;&nbsp;`uvm_info(get_type_name(),&nbsp;<span style="color: #98c379;line-height: 26px;">"TEST&nbsp;continous&nbsp;write&nbsp;transaction..."</span>,&nbsp;UVM_LOW)<br>&nbsp;&nbsp;&nbsp;&nbsp;repeat(test_num)&nbsp;begin<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;addr&nbsp;=&nbsp;<span style="color: #c678dd;line-height: 26px;">this</span>.get_rand_addr();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`uvm_do_with(single_write_seq,&nbsp;{addr&nbsp;==&nbsp;local::addr;&nbsp;data&nbsp;==&nbsp;local::addr;})<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mem[addr]&nbsp;=&nbsp;addr;<br>&nbsp;&nbsp;&nbsp;&nbsp;end<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #5c6370;font-style: italic;line-height: 26px;">//&nbsp;TEST&nbsp;continous&nbsp;read&nbsp;transaction</span><br>&nbsp;&nbsp;&nbsp;&nbsp;`uvm_info(get_type_name(),&nbsp;<span style="color: #98c379;line-height: 26px;">"TEST&nbsp;continous&nbsp;read&nbsp;transaction..."</span>,&nbsp;UVM_LOW)<br>&nbsp;&nbsp;&nbsp;&nbsp;repeat(test_num)&nbsp;begin<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;addr&nbsp;=&nbsp;<span style="color: #c678dd;line-height: 26px;">this</span>.get_rand_addr();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`uvm_do_with(single_read_seq,&nbsp;{addr&nbsp;==&nbsp;local::addr;})<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">void</span><span style="color: #d19a66;line-height: 26px;">'</span>(<span style="color: #c678dd;line-height: 26px;">this</span>.check_mem_data(addr,&nbsp;single_read_seq.data));<br>&nbsp;&nbsp;&nbsp;&nbsp;end<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #5c6370;font-style: italic;line-height: 26px;">//&nbsp;TEST&nbsp;read&nbsp;transaction&nbsp;after&nbsp;write&nbsp;transaction</span><br>&nbsp;&nbsp;&nbsp;&nbsp;`uvm_info(get_type_name(),&nbsp;<span style="color: #98c379;line-height: 26px;">"TEST&nbsp;read&nbsp;transaction&nbsp;after&nbsp;write&nbsp;transaction..."</span>,&nbsp;UVM_LOW)<br>&nbsp;&nbsp;&nbsp;&nbsp;repeat(test_num)&nbsp;begin<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;addr&nbsp;=&nbsp;<span style="color: #c678dd;line-height: 26px;">this</span>.get_rand_addr();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`uvm_do_with(single_write_seq,&nbsp;{addr&nbsp;==&nbsp;local::addr;&nbsp;data&nbsp;==&nbsp;local::addr;})<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mem[addr]&nbsp;=&nbsp;addr;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`uvm_do_with(single_read_seq,&nbsp;{addr&nbsp;==&nbsp;local::addr;})<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">void</span><span style="color: #d19a66;line-height: 26px;">'</span>(<span style="color: #c678dd;line-height: 26px;">this</span>.check_mem_data(addr,&nbsp;single_read_seq.data));<br>&nbsp;&nbsp;&nbsp;&nbsp;end<br><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #5c6370;font-style: italic;line-height: 26px;">//&nbsp;TEST&nbsp;read&nbsp;transaction&nbsp;immediately&nbsp;after&nbsp;write&nbsp;transaction</span><br>&nbsp;&nbsp;&nbsp;&nbsp;`uvm_info(get_type_name(),&nbsp;<span style="color: #98c379;line-height: 26px;">"TEST&nbsp;read&nbsp;transaction&nbsp;immediately&nbsp;after&nbsp;write&nbsp;transaction"</span>,&nbsp;UVM_LOW)<br>&nbsp;&nbsp;&nbsp;&nbsp;repeat(test_num)&nbsp;begin<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;addr&nbsp;=&nbsp;<span style="color: #c678dd;line-height: 26px;">this</span>.get_rand_addr();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`uvm_do_with(write_read_seq,&nbsp;{addr&nbsp;==&nbsp;local::addr;&nbsp;data&nbsp;==&nbsp;local::addr;})<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mem[addr]&nbsp;=&nbsp;addr;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">void</span><span style="color: #d19a66;line-height: 26px;">'</span>(<span style="color: #c678dd;line-height: 26px;">this</span>.check_mem_data(addr,&nbsp;write_read_seq.data));<br>&nbsp;&nbsp;&nbsp;&nbsp;end<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">this</span>.wait_cycles(<span style="color: #d19a66;line-height: 26px;">10</span>);<br>&nbsp;&nbsp;endtask<br>endclass:&nbsp;apb_single_transaction_sequence<br><br><span style="line-height: 26px;"><span style="color: #c678dd;line-height: 26px;">class</span>&nbsp;<span style="color: #e6c07b;line-height: 26px;">apb_single_transaction_test</span>&nbsp;<span style="color: #e6c07b;line-height: 26px;">extends</span>&nbsp;<span style="color: #e6c07b;line-height: 26px;">apb_base_test</span>;</span><br>&nbsp;&nbsp;`uvm_component_utils(apb_single_transaction_test)<br>&nbsp;&nbsp;<span style="line-height: 26px;">function&nbsp;<span style="color: #61aeee;line-height: 26px;">new</span><span style="line-height: 26px;">(<span style="color: #e6c07b;line-height: 26px;">string</span>&nbsp;name,&nbsp;uvm_component&nbsp;parent)</span></span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;super.<span style="color: #c678dd;line-height: 26px;">new</span>(name,&nbsp;parent);<br>&nbsp;&nbsp;<span style="line-height: 26px;">endfunction<br>&nbsp;&nbsp;task&nbsp;<span style="color: #61aeee;line-height: 26px;">run_phase</span><span style="line-height: 26px;">(uvm_phase&nbsp;phase)</span></span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;apb_single_transaction_sequence&nbsp;seq&nbsp;=&nbsp;<span style="color: #c678dd;line-height: 26px;">new</span>();<br>&nbsp;&nbsp;&nbsp;&nbsp;phase.raise_objection(<span style="color: #c678dd;line-height: 26px;">this</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;super.run_phase(phase);<br>&nbsp;&nbsp;&nbsp;&nbsp;seq.start(env.mst.sequencer);<br>&nbsp;&nbsp;&nbsp;&nbsp;phase.drop_objection(<span style="color: #c678dd;line-height: 26px;">this</span>);<br>&nbsp;&nbsp;endtask<br>endclass:&nbsp;apb_single_transaction_test<br><br><span style="line-height: 26px;"><span style="color: #c678dd;line-height: 26px;">class</span>&nbsp;<span style="color: #e6c07b;line-height: 26px;">apb_burst_transaction_sequence</span>&nbsp;<span style="color: #e6c07b;line-height: 26px;">extends</span>&nbsp;<span style="color: #e6c07b;line-height: 26px;">apb_base_test_sequence</span>;</span><br>&nbsp;&nbsp;apb_master_burst_write_sequence&nbsp;burst_write_seq;<br>&nbsp;&nbsp;apb_master_burst_read_sequence&nbsp;burst_read_seq;<br>&nbsp;&nbsp;rand&nbsp;<span style="color: #c678dd;line-height: 26px;">int</span>&nbsp;test_num&nbsp;=&nbsp;<span style="color: #d19a66;line-height: 26px;">100</span>;<br>&nbsp;&nbsp;constraint&nbsp;cstr{<br>&nbsp;&nbsp;&nbsp;&nbsp;soft&nbsp;test_num&nbsp;==&nbsp;<span style="color: #d19a66;line-height: 26px;">100</span>;<br>&nbsp;&nbsp;}<br>&nbsp;&nbsp;`uvm_object_utils(apb_burst_transaction_sequence)<br>&nbsp;&nbsp;<span style="line-height: 26px;">function&nbsp;<span style="color: #61aeee;line-height: 26px;">new</span><span style="line-height: 26px;">(<span style="color: #e6c07b;line-height: 26px;">string</span>&nbsp;name=<span style="color: #98c379;line-height: 26px;">""</span>)</span></span>;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;super.<span style="color: #c678dd;line-height: 26px;">new</span>(name);<br>&nbsp;&nbsp;endfunction&nbsp;:&nbsp;<span style="color: #c678dd;line-height: 26px;">new</span><br>&nbsp;&nbsp;task&nbsp;body();<br>&nbsp;&nbsp;&nbsp;&nbsp;bit[<span style="color: #d19a66;line-height: 26px;">31</span>:<span style="color: #d19a66;line-height: 26px;">0</span>]&nbsp;addr;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">this</span>.wait_reset_release();<br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">this</span>.wait_cycles(<span style="color: #d19a66;line-height: 26px;">10</span>);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #5c6370;font-style: italic;line-height: 26px;">//&nbsp;TEST&nbsp;continous&nbsp;write&nbsp;transaction</span><br>&nbsp;&nbsp;&nbsp;&nbsp;repeat(test_num)&nbsp;begin<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;addr&nbsp;=&nbsp;<span style="color: #c678dd;line-height: 26px;">this</span>.get_rand_addr();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`uvm_do_with(burst_write_seq,&nbsp;{addr&nbsp;==&nbsp;local::addr;})<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach(burst_write_seq.data[i])&nbsp;begin<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mem[addr+(i&lt;&lt;<span style="color: #d19a66;line-height: 26px;">2</span>)]&nbsp;=&nbsp;burst_write_seq.data[i];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`uvm_do_with(burst_read_seq,&nbsp;{addr&nbsp;==&nbsp;local::addr;&nbsp;data.size()&nbsp;==&nbsp;burst_write_seq.data.size();})<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach(burst_read_seq.data[i])&nbsp;begin<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">void</span><span style="color: #d19a66;line-height: 26px;">'</span>(<span style="color: #c678dd;line-height: 26px;">this</span>.check_mem_data(addr+(i&lt;&lt;<span style="color: #d19a66;line-height: 26px;">2</span>),&nbsp;burst_write_seq.data[i]));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end<br>&nbsp;&nbsp;&nbsp;&nbsp;end<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">this</span>.wait_cycles(<span style="color: #d19a66;line-height: 26px;">10</span>);<br>&nbsp;&nbsp;endtask<br>endclass:&nbsp;apb_burst_transaction_sequence<br><br><span style="line-height: 26px;"><span style="color: #c678dd;line-height: 26px;">class</span>&nbsp;<span style="color: #e6c07b;line-height: 26px;">apb_burst_transaction_test</span>&nbsp;<span style="color: #e6c07b;line-height: 26px;">extends</span>&nbsp;<span style="color: #e6c07b;line-height: 26px;">apb_base_test</span>;</span><br>&nbsp;&nbsp;`uvm_component_utils(apb_burst_transaction_test)<br>&nbsp;&nbsp;<span style="line-height: 26px;">function&nbsp;<span style="color: #61aeee;line-height: 26px;">new</span><span style="line-height: 26px;">(<span style="color: #e6c07b;line-height: 26px;">string</span>&nbsp;name,&nbsp;uvm_component&nbsp;parent)</span></span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;super.<span style="color: #c678dd;line-height: 26px;">new</span>(name,&nbsp;parent);<br>&nbsp;&nbsp;<span style="line-height: 26px;">endfunction<br>&nbsp;&nbsp;task&nbsp;<span style="color: #61aeee;line-height: 26px;">run_phase</span><span style="line-height: 26px;">(uvm_phase&nbsp;phase)</span></span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;apb_burst_transaction_sequence&nbsp;seq&nbsp;=&nbsp;<span style="color: #c678dd;line-height: 26px;">new</span>();<br>&nbsp;&nbsp;&nbsp;&nbsp;phase.raise_objection(<span style="color: #c678dd;line-height: 26px;">this</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;super.run_phase(phase);<br>&nbsp;&nbsp;&nbsp;&nbsp;seq.start(env.mst.sequencer);<br>&nbsp;&nbsp;&nbsp;&nbsp;phase.drop_objection(<span style="color: #c678dd;line-height: 26px;">this</span>);<br>&nbsp;&nbsp;endtask<br>endclass:&nbsp;apb_burst_transaction_test<br><br><br><br>`endif&nbsp;<span style="color: #5c6370;font-style: italic;line-height: 26px;">//&nbsp;APB_TESTS_SV</span><br></code></pre>
  <p data-tool="mdnice编辑器" style="padding-bottom: 8px;padding-top: 1em;color: rgb(74, 74, 74);line-height: 1.75em;"><strong style="line-height: 1.75em;">apb_if.sv</strong></p>
  <pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block;background: url(&quot;http://file.custom.com/view/125794260081442816&quot;) 10px 10px / 40px no-repeat rgb(40, 44, 52);height: 30px;width: 100%;margin-bottom: -7px;border-radius: 5px;"></span><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><br>`ifndef&nbsp;APB_IF_SV<br>`<span style="line-height: 26px;">define&nbsp;APB_IF_SV<br><br>interface&nbsp;<span style="color: #61aeee;line-height: 26px;">apb_if</span>&nbsp;<span style="line-height: 26px;">(input&nbsp;clk,&nbsp;input&nbsp;rstn)</span></span>;<br><br>&nbsp;&nbsp;logic&nbsp;[<span style="color: #d19a66;line-height: 26px;">31</span>:<span style="color: #d19a66;line-height: 26px;">0</span>]&nbsp;paddr;<br>&nbsp;&nbsp;logic&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pwrite;<br>&nbsp;&nbsp;logic&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;psel;<br>&nbsp;&nbsp;logic&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;penable;<br>&nbsp;&nbsp;logic&nbsp;[<span style="color: #d19a66;line-height: 26px;">31</span>:<span style="color: #d19a66;line-height: 26px;">0</span>]&nbsp;pwdata;<br>&nbsp;&nbsp;logic&nbsp;[<span style="color: #d19a66;line-height: 26px;">31</span>:<span style="color: #d19a66;line-height: 26px;">0</span>]&nbsp;prdata;<br><br>&nbsp;&nbsp;<span style="color: #5c6370;font-style: italic;line-height: 26px;">//&nbsp;Control&nbsp;flags</span><br>&nbsp;&nbsp;bit&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;has_checks&nbsp;=&nbsp;<span style="color: #d19a66;line-height: 26px;">1</span>;<br>&nbsp;&nbsp;bit&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;has_coverage&nbsp;=&nbsp;<span style="color: #d19a66;line-height: 26px;">1</span>;<br><br>&nbsp;&nbsp;<span style="color: #5c6370;font-style: italic;line-height: 26px;">//&nbsp;Actual&nbsp;Signals&nbsp;</span><br>&nbsp;&nbsp;<span style="color: #5c6370;font-style: italic;line-height: 26px;">//&nbsp;USER:&nbsp;Add&nbsp;interface&nbsp;signals</span><br><br>&nbsp;&nbsp;clocking&nbsp;cb_mst&nbsp;@(posedge&nbsp;clk);<br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #5c6370;font-style: italic;line-height: 26px;">//&nbsp;USER:&nbsp;Add&nbsp;clocking&nbsp;block&nbsp;detail</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">default</span>&nbsp;input&nbsp;#<span style="color: #d19a66;line-height: 26px;">1</span>ps&nbsp;output&nbsp;#<span style="color: #d19a66;line-height: 26px;">1</span>ps;<br>&nbsp;&nbsp;&nbsp;&nbsp;output&nbsp;paddr,&nbsp;pwrite,&nbsp;psel,&nbsp;penable,&nbsp;pwdata;<br>&nbsp;&nbsp;&nbsp;&nbsp;input&nbsp;prdata;<br>&nbsp;&nbsp;endclocking&nbsp;:&nbsp;cb_mst<br><br>&nbsp;&nbsp;clocking&nbsp;cb_slv&nbsp;@(posedge&nbsp;clk);<br>&nbsp;&nbsp;&nbsp;<span style="color: #5c6370;font-style: italic;line-height: 26px;">//&nbsp;USER:&nbsp;Add&nbsp;clocking&nbsp;block&nbsp;detail</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">default</span>&nbsp;input&nbsp;#<span style="color: #d19a66;line-height: 26px;">1</span>ps&nbsp;output&nbsp;#<span style="color: #d19a66;line-height: 26px;">1</span>ps;<br>&nbsp;&nbsp;&nbsp;&nbsp;input&nbsp;paddr,&nbsp;pwrite,&nbsp;psel,&nbsp;penable,&nbsp;pwdata;<br>&nbsp;&nbsp;&nbsp;&nbsp;output&nbsp;prdata;<br>&nbsp;&nbsp;endclocking&nbsp;:&nbsp;cb_slv<br><br>&nbsp;&nbsp;clocking&nbsp;cb_mon&nbsp;@(posedge&nbsp;clk);<br>&nbsp;&nbsp;&nbsp;<span style="color: #5c6370;font-style: italic;line-height: 26px;">//&nbsp;USER:&nbsp;Add&nbsp;clocking&nbsp;block&nbsp;detail</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">default</span>&nbsp;input&nbsp;#<span style="color: #d19a66;line-height: 26px;">1</span>ps&nbsp;output&nbsp;#<span style="color: #d19a66;line-height: 26px;">1</span>ps;<br>&nbsp;&nbsp;&nbsp;&nbsp;input&nbsp;paddr,&nbsp;pwrite,&nbsp;psel,&nbsp;penable,&nbsp;pwdata,&nbsp;prdata;<br>&nbsp;&nbsp;endclocking&nbsp;:&nbsp;cb_mon<br><br>&nbsp;&nbsp;<span style="color: #5c6370;font-style: italic;line-height: 26px;">//&nbsp;Coverage&nbsp;and&nbsp;assertions&nbsp;to&nbsp;be&nbsp;implemented&nbsp;here.</span><br>&nbsp;&nbsp;<span style="color: #5c6370;font-style: italic;line-height: 26px;">//&nbsp;USER:&nbsp;Add&nbsp;assertions/coverage&nbsp;here</span><br><br>&nbsp;&nbsp;<span style="color: #5c6370;font-style: italic;line-height: 26px;">//&nbsp;APB&nbsp;command&nbsp;covergroup</span><br>&nbsp;&nbsp;covergroup&nbsp;cg_apb_command&nbsp;@(posedge&nbsp;clk&nbsp;iff&nbsp;rstn);<br>&nbsp;&nbsp;&nbsp;&nbsp;pwrite:&nbsp;coverpoint&nbsp;pwrite{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type_option.weight&nbsp;=&nbsp;<span style="color: #d19a66;line-height: 26px;">0</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bins&nbsp;write&nbsp;=&nbsp;{<span style="color: #d19a66;line-height: 26px;">1</span>};<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bins&nbsp;read&nbsp;&nbsp;=&nbsp;{<span style="color: #d19a66;line-height: 26px;">0</span>};<br><br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;psel&nbsp;:&nbsp;coverpoint&nbsp;psel{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type_option.weight&nbsp;=&nbsp;<span style="color: #d19a66;line-height: 26px;">0</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bins&nbsp;sel&nbsp;&nbsp;&nbsp;=&nbsp;{<span style="color: #d19a66;line-height: 26px;">1</span>};<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bins&nbsp;unsel&nbsp;=&nbsp;{<span style="color: #d19a66;line-height: 26px;">0</span>};<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;cmd&nbsp;&nbsp;:&nbsp;cross&nbsp;pwrite,&nbsp;psel{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bins&nbsp;cmd_write&nbsp;=&nbsp;binsof(psel.sel)&nbsp;&amp;&amp;&nbsp;binsof(pwrite.write);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bins&nbsp;cmd_read&nbsp;&nbsp;=&nbsp;binsof(psel.sel)&nbsp;&amp;&amp;&nbsp;binsof(pwrite.read);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bins&nbsp;cmd_idle&nbsp;&nbsp;=&nbsp;binsof(psel.unsel);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;endgroup<br><br>&nbsp;&nbsp;<span style="color: #5c6370;font-style: italic;line-height: 26px;">//&nbsp;APB&nbsp;transaction&nbsp;timing&nbsp;group</span><br>&nbsp;&nbsp;covergroup&nbsp;cg_apb_trans_timing_group&nbsp;@(posedge&nbsp;clk&nbsp;iff&nbsp;rstn);<br>&nbsp;&nbsp;&nbsp;&nbsp;psel:&nbsp;coverpoint&nbsp;psel{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bins&nbsp;single&nbsp;&nbsp;&nbsp;=&nbsp;(<span style="color: #d19a66;line-height: 26px;">0</span>&nbsp;=&gt;&nbsp;<span style="color: #d19a66;line-height: 26px;">1</span>&nbsp;=&gt;&nbsp;<span style="color: #d19a66;line-height: 26px;">1</span>&nbsp;&nbsp;=&gt;&nbsp;<span style="color: #d19a66;line-height: 26px;">0</span>);&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bins&nbsp;burst_2&nbsp;&nbsp;=&nbsp;(<span style="color: #d19a66;line-height: 26px;">0</span>&nbsp;=&gt;&nbsp;<span style="color: #d19a66;line-height: 26px;">1</span>&nbsp;[*<span style="color: #d19a66;line-height: 26px;">4</span>]&nbsp;&nbsp;=&gt;&nbsp;<span style="color: #d19a66;line-height: 26px;">0</span>);&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bins&nbsp;burst_4&nbsp;&nbsp;=&nbsp;(<span style="color: #d19a66;line-height: 26px;">0</span>&nbsp;=&gt;&nbsp;<span style="color: #d19a66;line-height: 26px;">1</span>&nbsp;[*<span style="color: #d19a66;line-height: 26px;">8</span>]&nbsp;&nbsp;=&gt;&nbsp;<span style="color: #d19a66;line-height: 26px;">0</span>);&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bins&nbsp;burst_8&nbsp;&nbsp;=&nbsp;(<span style="color: #d19a66;line-height: 26px;">0</span>&nbsp;=&gt;&nbsp;<span style="color: #d19a66;line-height: 26px;">1</span>&nbsp;[*<span style="color: #d19a66;line-height: 26px;">16</span>]&nbsp;=&gt;&nbsp;<span style="color: #d19a66;line-height: 26px;">0</span>);&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bins&nbsp;burst_16&nbsp;=&nbsp;(<span style="color: #d19a66;line-height: 26px;">0</span>&nbsp;=&gt;&nbsp;<span style="color: #d19a66;line-height: 26px;">1</span>&nbsp;[*<span style="color: #d19a66;line-height: 26px;">32</span>]&nbsp;=&gt;&nbsp;<span style="color: #d19a66;line-height: 26px;">0</span>);&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bins&nbsp;burst_32&nbsp;=&nbsp;(<span style="color: #d19a66;line-height: 26px;">0</span>&nbsp;=&gt;&nbsp;<span style="color: #d19a66;line-height: 26px;">1</span>&nbsp;[*<span style="color: #d19a66;line-height: 26px;">64</span>]&nbsp;=&gt;&nbsp;<span style="color: #d19a66;line-height: 26px;">0</span>);&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;penable:&nbsp;coverpoint&nbsp;penable&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bins&nbsp;single&nbsp;=&nbsp;(<span style="color: #d19a66;line-height: 26px;">0</span>&nbsp;=&gt;&nbsp;<span style="color: #d19a66;line-height: 26px;">1</span>&nbsp;=&gt;&nbsp;<span style="color: #d19a66;line-height: 26px;">0</span>&nbsp;[*<span style="color: #d19a66;line-height: 26px;">2</span>:<span style="color: #d19a66;line-height: 26px;">10</span>]&nbsp;=&gt;&nbsp;<span style="color: #d19a66;line-height: 26px;">1</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bins&nbsp;burst&nbsp;&nbsp;=&nbsp;(<span style="color: #d19a66;line-height: 26px;">0</span>&nbsp;=&gt;&nbsp;<span style="color: #d19a66;line-height: 26px;">1</span>&nbsp;=&gt;&nbsp;<span style="color: #d19a66;line-height: 26px;">0</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt;&nbsp;<span style="color: #d19a66;line-height: 26px;">1</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;endgroup<br><br>&nbsp;&nbsp;<span style="color: #5c6370;font-style: italic;line-height: 26px;">//&nbsp;APB&nbsp;write&nbsp;&amp;&nbsp;read&nbsp;order&nbsp;group</span><br>&nbsp;&nbsp;covergroup&nbsp;cg_apb_write_read_order_group&nbsp;@(posedge&nbsp;clk&nbsp;iff&nbsp;(rstn&nbsp;&amp;&amp;&nbsp;penable));<br>&nbsp;&nbsp;&nbsp;&nbsp;write_read_order:&nbsp;coverpoint&nbsp;pwrite{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bins&nbsp;write_write&nbsp;=&nbsp;(<span style="color: #d19a66;line-height: 26px;">1</span>&nbsp;=&gt;&nbsp;<span style="color: #d19a66;line-height: 26px;">1</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bins&nbsp;write_read&nbsp;&nbsp;=&nbsp;(<span style="color: #d19a66;line-height: 26px;">1</span>&nbsp;=&gt;&nbsp;<span style="color: #d19a66;line-height: 26px;">0</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bins&nbsp;read_write&nbsp;&nbsp;=&nbsp;(<span style="color: #d19a66;line-height: 26px;">0</span>&nbsp;=&gt;&nbsp;<span style="color: #d19a66;line-height: 26px;">1</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bins&nbsp;read_read&nbsp;&nbsp;&nbsp;=&nbsp;(<span style="color: #d19a66;line-height: 26px;">0</span>&nbsp;=&gt;&nbsp;<span style="color: #d19a66;line-height: 26px;">0</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<br>&nbsp;&nbsp;endgroup<br><br>&nbsp;&nbsp;initial&nbsp;begin<br>&nbsp;&nbsp;&nbsp;&nbsp;automatic&nbsp;cg_apb_command&nbsp;cg0&nbsp;=&nbsp;<span style="color: #c678dd;line-height: 26px;">new</span>();<br>&nbsp;&nbsp;&nbsp;&nbsp;automatic&nbsp;cg_apb_trans_timing_group&nbsp;cg1&nbsp;=&nbsp;<span style="color: #c678dd;line-height: 26px;">new</span>();<br>&nbsp;&nbsp;&nbsp;&nbsp;automatic&nbsp;cg_apb_write_read_order_group&nbsp;cg2&nbsp;=&nbsp;<span style="color: #c678dd;line-height: 26px;">new</span>();<br>&nbsp;&nbsp;end<br><br>endinterface&nbsp;:&nbsp;apb_if<br><br>`endif&nbsp;<span style="color: #5c6370;font-style: italic;line-height: 26px;">//&nbsp;APB_IF_SV</span><br><br></code></pre>
  <h1 data-tool="mdnice编辑器" style="font-weight: bold;color: black;font-size: 24px;text-align: center;background-image: url(&quot;http://file.custom.com/view/125794260131774464&quot;);background-position: center top;background-repeat: no-repeat;background-size: 75px;line-height: 95px;margin-top: 38px;margin-bottom: 10px;"><span style="display: none;"></span><span style="font-size: 20px;color: #48b378;border-bottom: 2px solid #2e7950;">二、<code>apb_tests.sv</code>代码分析</span></h1>
  <p data-tool="mdnice编辑器" style="padding-bottom: 8px;padding-top: 1em;color: rgb(74, 74, 74);line-height: 1.75em;"><strong style="line-height: 1.75em;"><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">apb_base_test_sequence</code>类</strong></p>
  <p data-tool="mdnice编辑器" style="padding-bottom: 8px;padding-top: 1em;color: rgb(74, 74, 74);line-height: 1.75em;"><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">check_mem_data()</code>方法原理结构框图：</p>
  <p data-tool="mdnice编辑器" style="padding-bottom: 8px;padding-top: 1em;color: rgb(74, 74, 74);line-height: 1.75em;">关联数组mem，用来master和slave之间的数据比对，test和slave中都有一个mem，master通过接口发送数据给slave，slave中的mem和test中的mem都会存储这个数据，等从slave读回数据时，就可以和test中mem里面的数据进行比较。<br><img class="rich_pages wxw-img" data-ratio="0.7398119122257053" src="http://file.custom.com/view/125794260356169728" data-type="png" data-w="638" style="display: block;margin-right: auto;margin-left: auto;border-radius: 4px;margin-bottom: 25px;"></p>
  <p data-tool="mdnice编辑器" style="padding-bottom: 8px;padding-top: 1em;color: rgb(74, 74, 74);line-height: 1.75em;"><strong style="line-height: 1.75em;"><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">apb_single_transaction_sequence</code>类</strong></p>
  <p data-tool="mdnice编辑器" style="padding-bottom: 8px;padding-top: 1em;color: rgb(74, 74, 74);line-height: 1.75em;">随机化addr，测试连续写操作</p>
  <pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block;background: url(&quot;http://file.custom.com/view/125794260081442816&quot;) 10px 10px / 40px no-repeat rgb(40, 44, 52);height: 30px;width: 100%;margin-bottom: -7px;border-radius: 5px;"></span><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #5c6370;font-style: italic;line-height: 26px;">//&nbsp;TEST&nbsp;continous&nbsp;write&nbsp;transaction</span><br>&nbsp;&nbsp;&nbsp;&nbsp;`uvm_info(get_type_name(),&nbsp;<span style="color: #98c379;line-height: 26px;">"TEST&nbsp;continous&nbsp;write&nbsp;transaction..."</span>,&nbsp;UVM_LOW)<br>&nbsp;&nbsp;&nbsp;&nbsp;repeat(test_num)&nbsp;begin<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;addr&nbsp;=&nbsp;<span style="color: #c678dd;line-height: 26px;">this</span>.get_rand_addr();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`uvm_do_with(single_write_seq,&nbsp;{addr&nbsp;==&nbsp;local::addr;&nbsp;data&nbsp;==&nbsp;local::addr;})<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mem[addr]&nbsp;=&nbsp;addr;<br>&nbsp;&nbsp;&nbsp;&nbsp;end<br></code></pre>
  <p data-tool="mdnice编辑器" style="padding-bottom: 8px;padding-top: 1em;color: rgb(74, 74, 74);line-height: 1.75em;">随机化addr，测试连续读操作，并比较数据是否一致</p>
  <pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block;background: url(&quot;http://file.custom.com/view/125794260081442816&quot;) 10px 10px / 40px no-repeat rgb(40, 44, 52);height: 30px;width: 100%;margin-bottom: -7px;border-radius: 5px;"></span><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #5c6370;font-style: italic;line-height: 26px;">//&nbsp;TEST&nbsp;continous&nbsp;read&nbsp;transaction</span><br>&nbsp;&nbsp;&nbsp;&nbsp;`uvm_info(get_type_name(),&nbsp;<span style="color: #98c379;line-height: 26px;">"TEST&nbsp;continous&nbsp;read&nbsp;transaction..."</span>,&nbsp;UVM_LOW)<br>&nbsp;&nbsp;&nbsp;&nbsp;repeat(test_num)&nbsp;begin<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;addr&nbsp;=&nbsp;<span style="color: #c678dd;line-height: 26px;">this</span>.get_rand_addr();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`uvm_do_with(single_read_seq,&nbsp;{addr&nbsp;==&nbsp;local::addr;})<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">void</span><span style="color: #d19a66;line-height: 26px;">'</span>(<span style="color: #c678dd;line-height: 26px;">this</span>.check_mem_data(addr,&nbsp;single_read_seq.data));<br>&nbsp;&nbsp;&nbsp;&nbsp;end<br></code></pre>
  <p data-tool="mdnice编辑器" style="padding-bottom: 8px;padding-top: 1em;color: rgb(74, 74, 74);line-height: 1.75em;">随机化addr，先进行写操作，再进行读操作，并比较读取的数据是否一致</p>
  <pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block;background: url(&quot;http://file.custom.com/view/125794260081442816&quot;) 10px 10px / 40px no-repeat rgb(40, 44, 52);height: 30px;width: 100%;margin-bottom: -7px;border-radius: 5px;"></span><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #5c6370;font-style: italic;line-height: 26px;">//&nbsp;TEST&nbsp;read&nbsp;transaction&nbsp;after&nbsp;write&nbsp;transaction</span><br>&nbsp;&nbsp;&nbsp;&nbsp;`uvm_info(get_type_name(),&nbsp;<span style="color: #98c379;line-height: 26px;">"TEST&nbsp;read&nbsp;transaction&nbsp;after&nbsp;write&nbsp;transaction..."</span>,&nbsp;UVM_LOW)<br>&nbsp;&nbsp;&nbsp;&nbsp;repeat(test_num)&nbsp;begin<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;addr&nbsp;=&nbsp;<span style="color: #c678dd;line-height: 26px;">this</span>.get_rand_addr();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`uvm_do_with(single_write_seq,&nbsp;{addr&nbsp;==&nbsp;local::addr;&nbsp;data&nbsp;==&nbsp;local::addr;})<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mem[addr]&nbsp;=&nbsp;addr;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`uvm_do_with(single_read_seq,&nbsp;{addr&nbsp;==&nbsp;local::addr;})<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">void</span><span style="color: #d19a66;line-height: 26px;">'</span>(<span style="color: #c678dd;line-height: 26px;">this</span>.check_mem_data(addr,&nbsp;single_read_seq.data));<br>&nbsp;&nbsp;&nbsp;&nbsp;end<br></code></pre>
  <p data-tool="mdnice编辑器" style="padding-bottom: 8px;padding-top: 1em;color: rgb(74, 74, 74);line-height: 1.75em;">随机化addr，写完立即读，中间没有idle空闲，并检查读取数据是否一致</p>
  <pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block;background: url(&quot;http://file.custom.com/view/125794260081442816&quot;) 10px 10px / 40px no-repeat rgb(40, 44, 52);height: 30px;width: 100%;margin-bottom: -7px;border-radius: 5px;"></span><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #5c6370;font-style: italic;line-height: 26px;">//&nbsp;TEST&nbsp;read&nbsp;transaction&nbsp;immediately&nbsp;after&nbsp;write&nbsp;transaction</span><br>&nbsp;&nbsp;&nbsp;&nbsp;`uvm_info(get_type_name(),&nbsp;<span style="color: #98c379;line-height: 26px;">"TEST&nbsp;read&nbsp;transaction&nbsp;immediately&nbsp;after&nbsp;write&nbsp;transaction"</span>,&nbsp;UVM_LOW)<br>&nbsp;&nbsp;&nbsp;&nbsp;repeat(test_num)&nbsp;begin<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;addr&nbsp;=&nbsp;<span style="color: #c678dd;line-height: 26px;">this</span>.get_rand_addr();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`uvm_do_with(write_read_seq,&nbsp;{addr&nbsp;==&nbsp;local::addr;&nbsp;data&nbsp;==&nbsp;local::addr;})<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mem[addr]&nbsp;=&nbsp;addr;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">void</span><span style="color: #d19a66;line-height: 26px;">'</span>(<span style="color: #c678dd;line-height: 26px;">this</span>.check_mem_data(addr,&nbsp;write_read_seq.data));<br>&nbsp;&nbsp;&nbsp;&nbsp;end<br></code></pre>
  <p data-tool="mdnice编辑器" style="padding-bottom: 8px;padding-top: 1em;color: rgb(74, 74, 74);line-height: 1.75em;">例化并挂载</p>
  <pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block;background: url(&quot;http://file.custom.com/view/125794260081442816&quot;) 10px 10px / 40px no-repeat rgb(40, 44, 52);height: 30px;width: 100%;margin-bottom: -7px;border-radius: 5px;"></span><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="line-height: 26px;"><span style="color: #c678dd;line-height: 26px;">class</span>&nbsp;<span style="color: #e6c07b;line-height: 26px;">apb_single_transaction_test</span>&nbsp;<span style="color: #e6c07b;line-height: 26px;">extends</span>&nbsp;<span style="color: #e6c07b;line-height: 26px;">apb_base_test</span>;</span><br>&nbsp;&nbsp;`uvm_component_utils(apb_single_transaction_test)<br>&nbsp;&nbsp;<span style="line-height: 26px;">function&nbsp;<span style="color: #61aeee;line-height: 26px;">new</span><span style="line-height: 26px;">(<span style="color: #e6c07b;line-height: 26px;">string</span>&nbsp;name,&nbsp;uvm_component&nbsp;parent)</span></span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;super.<span style="color: #c678dd;line-height: 26px;">new</span>(name,&nbsp;parent);<br>&nbsp;&nbsp;<span style="line-height: 26px;">endfunction<br>&nbsp;&nbsp;task&nbsp;<span style="color: #61aeee;line-height: 26px;">run_phase</span><span style="line-height: 26px;">(uvm_phase&nbsp;phase)</span></span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;apb_single_transaction_sequence&nbsp;seq&nbsp;=&nbsp;<span style="color: #c678dd;line-height: 26px;">new</span>();<br>&nbsp;&nbsp;&nbsp;&nbsp;phase.raise_objection(<span style="color: #c678dd;line-height: 26px;">this</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;super.run_phase(phase);<br>&nbsp;&nbsp;&nbsp;&nbsp;seq.start(env.mst.sequencer);<br>&nbsp;&nbsp;&nbsp;&nbsp;phase.drop_objection(<span style="color: #c678dd;line-height: 26px;">this</span>);<br>&nbsp;&nbsp;endtask<br>endclass:&nbsp;apb_single_transaction_test<br></code></pre>
  <p data-tool="mdnice编辑器" style="padding-bottom: 8px;padding-top: 1em;color: rgb(74, 74, 74);line-height: 1.75em;"><strong style="line-height: 1.75em;"><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">apb_burst_transaction_sequence</code>类</strong></p>
  <p data-tool="mdnice编辑器" style="padding-bottom: 8px;padding-top: 1em;color: rgb(74, 74, 74);line-height: 1.75em;">先全部写操作完毕，在完全读出来，地址是连续增长的</p>
  <pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block;background: url(&quot;http://file.custom.com/view/125794260081442816&quot;) 10px 10px / 40px no-repeat rgb(40, 44, 52);height: 30px;width: 100%;margin-bottom: -7px;border-radius: 5px;"></span><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #5c6370;font-style: italic;line-height: 26px;">//&nbsp;TEST&nbsp;continous&nbsp;write&nbsp;transaction</span><br>&nbsp;&nbsp;&nbsp;&nbsp;repeat(test_num)&nbsp;begin<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;addr&nbsp;=&nbsp;<span style="color: #c678dd;line-height: 26px;">this</span>.get_rand_addr();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`uvm_do_with(burst_write_seq,&nbsp;{addr&nbsp;==&nbsp;local::addr;})<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach(burst_write_seq.data[i])&nbsp;begin<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mem[addr+(i&lt;&lt;<span style="color: #d19a66;line-height: 26px;">2</span>)]&nbsp;=&nbsp;burst_write_seq.data[i];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`uvm_do_with(burst_read_seq,&nbsp;{addr&nbsp;==&nbsp;local::addr;&nbsp;data.size()&nbsp;==&nbsp;burst_write_seq.data.size();})<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach(burst_read_seq.data[i])&nbsp;begin<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">void</span><span style="color: #d19a66;line-height: 26px;">'</span>(<span style="color: #c678dd;line-height: 26px;">this</span>.check_mem_data(addr+(i&lt;&lt;<span style="color: #d19a66;line-height: 26px;">2</span>),&nbsp;burst_write_seq.data[i]));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end<br>&nbsp;&nbsp;&nbsp;&nbsp;end<br></code></pre>
  <p data-tool="mdnice编辑器" style="padding-bottom: 8px;padding-top: 1em;color: rgb(74, 74, 74);line-height: 1.75em;">例化并挂载</p>
  <pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block;background: url(&quot;http://file.custom.com/view/125794260081442816&quot;) 10px 10px / 40px no-repeat rgb(40, 44, 52);height: 30px;width: 100%;margin-bottom: -7px;border-radius: 5px;"></span><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="line-height: 26px;"><span style="color: #c678dd;line-height: 26px;">class</span>&nbsp;<span style="color: #e6c07b;line-height: 26px;">apb_burst_transaction_test</span>&nbsp;<span style="color: #e6c07b;line-height: 26px;">extends</span>&nbsp;<span style="color: #e6c07b;line-height: 26px;">apb_base_test</span>;</span><br>&nbsp;&nbsp;`uvm_component_utils(apb_burst_transaction_test)<br>&nbsp;&nbsp;<span style="line-height: 26px;">function&nbsp;<span style="color: #61aeee;line-height: 26px;">new</span><span style="line-height: 26px;">(<span style="color: #e6c07b;line-height: 26px;">string</span>&nbsp;name,&nbsp;uvm_component&nbsp;parent)</span></span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;super.<span style="color: #c678dd;line-height: 26px;">new</span>(name,&nbsp;parent);<br>&nbsp;&nbsp;<span style="line-height: 26px;">endfunction<br>&nbsp;&nbsp;task&nbsp;<span style="color: #61aeee;line-height: 26px;">run_phase</span><span style="line-height: 26px;">(uvm_phase&nbsp;phase)</span></span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;apb_burst_transaction_sequence&nbsp;seq&nbsp;=&nbsp;<span style="color: #c678dd;line-height: 26px;">new</span>();<br>&nbsp;&nbsp;&nbsp;&nbsp;phase.raise_objection(<span style="color: #c678dd;line-height: 26px;">this</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;super.run_phase(phase);<br>&nbsp;&nbsp;&nbsp;&nbsp;seq.start(env.mst.sequencer);<br>&nbsp;&nbsp;&nbsp;&nbsp;phase.drop_objection(<span style="color: #c678dd;line-height: 26px;">this</span>);<br>&nbsp;&nbsp;endtask<br>endclass:&nbsp;apb_burst_transaction_test<br></code></pre>
  <h1 data-tool="mdnice编辑器" style="font-weight: bold;color: black;font-size: 24px;text-align: center;background-image: url(&quot;http://file.custom.com/view/125794260131774464&quot;);background-position: center top;background-repeat: no-repeat;background-size: 75px;line-height: 95px;margin-top: 38px;margin-bottom: 10px;"><span style="display: none;"></span><span style="font-size: 20px;color: #48b378;border-bottom: 2px solid #2e7950;">三、<code>apb_master_agent.sv</code>代码分析</span></h1>
  <p data-tool="mdnice编辑器" style="padding-bottom: 8px;padding-top: 1em;color: rgb(74, 74, 74);line-height: 1.75em;"><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">agent</code>包括三个组件<code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">driver</code>、<code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">sequencer</code>、<code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">monitor</code>，以及<code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">config</code>和<code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">interface</code>。</p>
  <p data-tool="mdnice编辑器" style="padding-bottom: 8px;padding-top: 1em;color: rgb(74, 74, 74);line-height: 1.75em;">例化<code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">monitor</code>，根据配置决定是否例化<code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">driver</code>和<code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">sequencer</code></p>
  <pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block;background: url(&quot;http://file.custom.com/view/125794260081442816&quot;) 10px 10px / 40px no-repeat rgb(40, 44, 52);height: 30px;width: 100%;margin-bottom: -7px;border-radius: 5px;"></span><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="line-height: 26px;">function&nbsp;<span style="color: #c678dd;line-height: 26px;">void</span>&nbsp;<span style="color: #61aeee;line-height: 26px;">apb_master_agent::build</span><span style="line-height: 26px;">()</span></span>;<br>&nbsp;&nbsp;super.build();<br>&nbsp;&nbsp;<span style="color: #5c6370;font-style: italic;line-height: 26px;">//&nbsp;get&nbsp;config</span><br>&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">if</span>(&nbsp;!uvm_config_db#(apb_config)::get(<span style="color: #c678dd;line-height: 26px;">this</span>,<span style="color: #98c379;line-height: 26px;">""</span>,<span style="color: #98c379;line-height: 26px;">"cfg"</span>,&nbsp;cfg))&nbsp;begin<br>&nbsp;&nbsp;&nbsp;&nbsp;`uvm_warning(<span style="color: #98c379;line-height: 26px;">"GETCFG"</span>,<span style="color: #98c379;line-height: 26px;">"cannot&nbsp;get&nbsp;config&nbsp;object&nbsp;from&nbsp;config&nbsp;DB"</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cfg&nbsp;=&nbsp;apb_config::type_id::create(<span style="color: #98c379;line-height: 26px;">"cfg"</span>);<br>&nbsp;&nbsp;end<br>&nbsp;&nbsp;<span style="color: #5c6370;font-style: italic;line-height: 26px;">//&nbsp;get&nbsp;virtual&nbsp;interface</span><br>&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">if</span>(&nbsp;!uvm_config_db#(<span style="color: #c678dd;line-height: 26px;">virtual</span>&nbsp;apb_if)::get(<span style="color: #c678dd;line-height: 26px;">this</span>,<span style="color: #98c379;line-height: 26px;">""</span>,<span style="color: #98c379;line-height: 26px;">"vif"</span>,&nbsp;vif))&nbsp;begin<br>&nbsp;&nbsp;&nbsp;&nbsp;`uvm_fatal(<span style="color: #98c379;line-height: 26px;">"GETVIF"</span>,<span style="color: #98c379;line-height: 26px;">"cannot&nbsp;get&nbsp;vif&nbsp;handle&nbsp;from&nbsp;config&nbsp;DB"</span>)<br>&nbsp;&nbsp;end<br>&nbsp;&nbsp;monitor&nbsp;=&nbsp;apb_master_monitor::type_id::create(<span style="color: #98c379;line-height: 26px;">"monitor"</span>,<span style="color: #c678dd;line-height: 26px;">this</span>);<br>&nbsp;&nbsp;monitor.cfg&nbsp;=&nbsp;cfg;<br>&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">if</span>(cfg.is_active&nbsp;==&nbsp;UVM_ACTIVE)&nbsp;begin<br>&nbsp;&nbsp;&nbsp;&nbsp;sequencer&nbsp;=&nbsp;apb_master_sequencer::type_id::create(<span style="color: #98c379;line-height: 26px;">"sequencer"</span>,<span style="color: #c678dd;line-height: 26px;">this</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;sequencer.cfg&nbsp;=&nbsp;cfg;<br>&nbsp;&nbsp;&nbsp;&nbsp;driver&nbsp;=&nbsp;apb_master_driver::type_id::create(<span style="color: #98c379;line-height: 26px;">"driver"</span>,<span style="color: #c678dd;line-height: 26px;">this</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;driver.cfg&nbsp;=&nbsp;cfg;<br>&nbsp;&nbsp;end<br>endfunction&nbsp;:&nbsp;build<br></code></pre>
  <p data-tool="mdnice编辑器" style="padding-bottom: 8px;padding-top: 1em;color: rgb(74, 74, 74);line-height: 1.75em;">根据配置决定是否连接<code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">driver</code>和<code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">sequencer</code></p>
  <pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block;background: url(&quot;http://file.custom.com/view/125794260081442816&quot;) 10px 10px / 40px no-repeat rgb(40, 44, 52);height: 30px;width: 100%;margin-bottom: -7px;border-radius: 5px;"></span><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="line-height: 26px;">function&nbsp;<span style="color: #c678dd;line-height: 26px;">void</span>&nbsp;<span style="color: #61aeee;line-height: 26px;">apb_master_agent::connect</span><span style="line-height: 26px;">()</span></span>;<br>&nbsp;&nbsp;assign_vi(vif);<br><br>&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">if</span>(is_active&nbsp;==&nbsp;UVM_ACTIVE)&nbsp;begin<br>&nbsp;&nbsp;&nbsp;&nbsp;driver.seq_item_port.connect(sequencer.seq_item_export);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;end<br><br>endfunction&nbsp;:&nbsp;connect<br></code></pre>
  <p data-tool="mdnice编辑器" style="padding-bottom: 8px;padding-top: 1em;color: rgb(74, 74, 74);line-height: 1.75em;">根据配置决定是否vif和driver、sequencer之间的连接</p>
  <pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block;background: url(&quot;http://file.custom.com/view/125794260081442816&quot;) 10px 10px / 40px no-repeat rgb(40, 44, 52);height: 30px;width: 100%;margin-bottom: -7px;border-radius: 5px;"></span><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="line-height: 26px;">function&nbsp;<span style="color: #c678dd;line-height: 26px;">void</span>&nbsp;<span style="color: #61aeee;line-height: 26px;">apb_master_agent::assign_vi</span><span style="line-height: 26px;">(<span style="color: #c678dd;line-height: 26px;">virtual</span>&nbsp;apb_if&nbsp;vif)</span></span>;<br>&nbsp;&nbsp;&nbsp;monitor.vif&nbsp;=&nbsp;vif;<br>&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">if</span>&nbsp;(is_active&nbsp;==&nbsp;UVM_ACTIVE)&nbsp;begin<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sequencer.vif&nbsp;=&nbsp;vif;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;driver.vif&nbsp;=&nbsp;vif;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;end<br>endfunction&nbsp;:&nbsp;assign_vi<br></code></pre>
  <h1 data-tool="mdnice编辑器" style="font-weight: bold;color: black;font-size: 24px;text-align: center;background-image: url(&quot;http://file.custom.com/view/125794260131774464&quot;);background-position: center top;background-repeat: no-repeat;background-size: 75px;line-height: 95px;margin-top: 38px;margin-bottom: 10px;"><span style="display: none;"></span><span style="font-size: 20px;color: #48b378;border-bottom: 2px solid #2e7950;">四、<code>apb_master_driver.sv</code>代码分析</span></h1>
  <p data-tool="mdnice编辑器" style="padding-bottom: 8px;padding-top: 1em;color: rgb(74, 74, 74);line-height: 1.75em;">并行触发<code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">get_and_drive()</code>、<code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">reset_listener()</code></p>
  <pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block;background: url(&quot;http://file.custom.com/view/125794260081442816&quot;) 10px 10px / 40px no-repeat rgb(40, 44, 52);height: 30px;width: 100%;margin-bottom: -7px;border-radius: 5px;"></span><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="line-height: 26px;">task&nbsp;<span style="color: #61aeee;line-height: 26px;">apb_master_driver::run</span><span style="line-height: 26px;">()</span></span>;<br>&nbsp;&nbsp;&nbsp;<span style="line-height: 26px;">fork<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #61aeee;line-height: 26px;">get_and_drive</span><span style="line-height: 26px;">()</span></span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reset_listener();<br>&nbsp;&nbsp;&nbsp;join_none<br>endtask&nbsp;:&nbsp;run<br></code></pre>
  <p data-tool="mdnice编辑器" style="padding-bottom: 8px;padding-top: 1em;color: rgb(74, 74, 74);line-height: 1.75em;">捕捉到复位信号以后，所以信号清零</p>
  <pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block;background: url(&quot;http://file.custom.com/view/125794260081442816&quot;) 10px 10px / 40px no-repeat rgb(40, 44, 52);height: 30px;width: 100%;margin-bottom: -7px;border-radius: 5px;"></span><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="line-height: 26px;">task&nbsp;<span style="color: #61aeee;line-height: 26px;">apb_master_driver::reset_listener</span><span style="line-height: 26px;">()</span></span>;<br>&nbsp;&nbsp;`uvm_info(get_type_name(),&nbsp;<span style="color: #98c379;line-height: 26px;">"reset_listener&nbsp;..."</span>,&nbsp;UVM_HIGH)<br>&nbsp;&nbsp;fork<br>&nbsp;&nbsp;&nbsp;&nbsp;forever&nbsp;begin<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@(negedge&nbsp;vif.rstn);&nbsp;<span style="color: #5c6370;font-style: italic;line-height: 26px;">//&nbsp;ASYNC&nbsp;reset</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vif.paddr&nbsp;&lt;=&nbsp;<span style="color: #d19a66;line-height: 26px;">0</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vif.pwrite&nbsp;&lt;=&nbsp;<span style="color: #d19a66;line-height: 26px;">0</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vif.psel&nbsp;&lt;=&nbsp;<span style="color: #d19a66;line-height: 26px;">0</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vif.penable&nbsp;&lt;=&nbsp;<span style="color: #d19a66;line-height: 26px;">0</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vif.pwdata&nbsp;&lt;=&nbsp;<span style="color: #d19a66;line-height: 26px;">0</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;end<br>&nbsp;&nbsp;join_none<br>endtask<br></code></pre>
  <p data-tool="mdnice编辑器" style="padding-bottom: 8px;padding-top: 1em;color: rgb(74, 74, 74);line-height: 1.75em;"><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">sequence</code>和<code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">sequencer</code>需要握手，获取<code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">transaction</code>以后调用<code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">driver_transfer()</code>发送。发送成功以后克隆<code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">request</code>生成新的<code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">response</code>，作为响应发送回去。</p>
  <pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block;background: url(&quot;http://file.custom.com/view/125794260081442816&quot;) 10px 10px / 40px no-repeat rgb(40, 44, 52);height: 30px;width: 100%;margin-bottom: -7px;border-radius: 5px;"></span><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="line-height: 26px;">task&nbsp;<span style="color: #61aeee;line-height: 26px;">apb_master_driver::get_and_drive</span><span style="line-height: 26px;">()</span></span>;<br>&nbsp;&nbsp;forever&nbsp;begin<br>&nbsp;&nbsp;&nbsp;&nbsp;seq_item_port.get_next_item(req);<br>&nbsp;&nbsp;&nbsp;&nbsp;`uvm_info(get_type_name(),&nbsp;<span style="color: #98c379;line-height: 26px;">"sequencer&nbsp;got&nbsp;next&nbsp;item"</span>,&nbsp;UVM_HIGH)<br>&nbsp;&nbsp;&nbsp;&nbsp;drive_transfer(req);<br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">void</span><span style="color: #d19a66;line-height: 26px;">'</span>($cast(rsp,&nbsp;req.clone()));<br>&nbsp;&nbsp;&nbsp;&nbsp;rsp.set_sequence_id(req.get_sequence_id());<br>&nbsp;&nbsp;&nbsp;&nbsp;seq_item_port.item_done(rsp);<br>&nbsp;&nbsp;&nbsp;&nbsp;`uvm_info(get_type_name(),&nbsp;<span style="color: #98c379;line-height: 26px;">"sequencer&nbsp;item_done_triggered"</span>,&nbsp;UVM_HIGH)<br>&nbsp;&nbsp;end<br>endtask&nbsp;:&nbsp;<span style="line-height: 26px;">get_and_drive<br><br>task&nbsp;<span style="color: #61aeee;line-height: 26px;">apb_master_driver::drive_transfer</span>&nbsp;<span style="line-height: 26px;">(apb_transfer&nbsp;t)</span></span>;<br>&nbsp;&nbsp;`uvm_info(get_type_name(),&nbsp;<span style="color: #98c379;line-height: 26px;">"drive_transfer"</span>,&nbsp;UVM_HIGH)<br>&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">case</span>(t.trans_kind)<br>&nbsp;&nbsp;&nbsp;&nbsp;IDLE&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;<span style="color: #c678dd;line-height: 26px;">this</span>.do_idle();<br>&nbsp;&nbsp;&nbsp;&nbsp;WRITE&nbsp;&nbsp;&nbsp;:&nbsp;<span style="color: #c678dd;line-height: 26px;">this</span>.do_write(t);<br>&nbsp;&nbsp;&nbsp;&nbsp;READ&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;<span style="color: #c678dd;line-height: 26px;">this</span>.do_read(t);<br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">default</span>&nbsp;:&nbsp;`uvm_error(<span style="color: #98c379;line-height: 26px;">"ERRTYPE"</span>,&nbsp;<span style="color: #98c379;line-height: 26px;">"unrecognized&nbsp;transaction&nbsp;type"</span>)<br>&nbsp;&nbsp;endcase<br>endtask&nbsp;:&nbsp;drive_transfer<br></code></pre>
  <p data-tool="mdnice编辑器" style="padding-bottom: 8px;padding-top: 1em;color: rgb(74, 74, 74);line-height: 1.75em;">根据<code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">trans_kind</code>判断操作命令，分别调用相对应的方法。</p>
  <pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block;background: url(&quot;http://file.custom.com/view/125794260081442816&quot;) 10px 10px / 40px no-repeat rgb(40, 44, 52);height: 30px;width: 100%;margin-bottom: -7px;border-radius: 5px;"></span><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="line-height: 26px;">task&nbsp;<span style="color: #61aeee;line-height: 26px;">apb_master_driver::do_write</span><span style="line-height: 26px;">(apb_transfer&nbsp;t)</span></span>;<br>&nbsp;&nbsp;`uvm_info(get_type_name(),&nbsp;<span style="color: #98c379;line-height: 26px;">"do_write&nbsp;..."</span>,&nbsp;UVM_HIGH)<br>&nbsp;&nbsp;<span style="color: #5c6370;font-style: italic;line-height: 26px;">//写操作一共分为两个周期，根据协议第一个周期setup准备阶段需要如下操作</span><br>&nbsp;&nbsp;@(vif.cb_mst);<br>&nbsp;&nbsp;vif.cb_mst.paddr&nbsp;&lt;=&nbsp;t.addr;<br>&nbsp;&nbsp;vif.cb_mst.pwrite&nbsp;&lt;=&nbsp;<span style="color: #d19a66;line-height: 26px;">1</span>;<br>&nbsp;&nbsp;vif.cb_mst.psel&nbsp;&lt;=&nbsp;<span style="color: #d19a66;line-height: 26px;">1</span>;<br>&nbsp;&nbsp;vif.cb_mst.penable&nbsp;&lt;=&nbsp;<span style="color: #d19a66;line-height: 26px;">0</span>;<br>&nbsp;&nbsp;vif.cb_mst.pwdata&nbsp;&lt;=&nbsp;t.data;<br>&nbsp;&nbsp;<span style="color: #5c6370;font-style: italic;line-height: 26px;">//第二个阶段拉高penable信号，发送数据</span><br>&nbsp;&nbsp;@(vif.cb_mst);<br>&nbsp;&nbsp;vif.cb_mst.penable&nbsp;&lt;=&nbsp;<span style="color: #d19a66;line-height: 26px;">1</span>;<br>&nbsp;&nbsp;repeat(t.idle_cycles)&nbsp;<span style="color: #c678dd;line-height: 26px;">this</span>.do_idle();&nbsp;&nbsp;<span style="color: #5c6370;font-style: italic;line-height: 26px;">//取决于transaction里面的idle</span><br>endtask:&nbsp;<span style="line-height: 26px;">do_write<br><br>task&nbsp;<span style="color: #61aeee;line-height: 26px;">apb_master_driver::do_read</span><span style="line-height: 26px;">(apb_transfer&nbsp;t)</span></span>;<br>&nbsp;&nbsp;`uvm_info(get_type_name(),&nbsp;<span style="color: #98c379;line-height: 26px;">"do_write&nbsp;..."</span>,&nbsp;UVM_HIGH)<br>&nbsp;&nbsp;<span style="color: #5c6370;font-style: italic;line-height: 26px;">//第一个阶段</span><br>&nbsp;&nbsp;@(vif.cb_mst);<br>&nbsp;&nbsp;vif.cb_mst.paddr&nbsp;&lt;=&nbsp;t.addr;<br>&nbsp;&nbsp;vif.cb_mst.pwrite&nbsp;&lt;=&nbsp;<span style="color: #d19a66;line-height: 26px;">0</span>;<br>&nbsp;&nbsp;vif.cb_mst.psel&nbsp;&lt;=&nbsp;<span style="color: #d19a66;line-height: 26px;">1</span>;<br>&nbsp;&nbsp;vif.cb_mst.penable&nbsp;&lt;=&nbsp;<span style="color: #d19a66;line-height: 26px;">0</span>;<br>&nbsp;&nbsp;<span style="color: #5c6370;font-style: italic;line-height: 26px;">//第二个阶段</span><br>&nbsp;&nbsp;@(vif.cb_mst);<br>&nbsp;&nbsp;vif.cb_mst.penable&nbsp;&lt;=&nbsp;<span style="color: #d19a66;line-height: 26px;">1</span>;<br>&nbsp;&nbsp;#<span style="color: #d19a66;line-height: 26px;">100</span>ps;&nbsp;<span style="color: #5c6370;font-style: italic;line-height: 26px;">//需要采样数据，人为添加100ps的delay，是为了避免delta-cycle</span><br>&nbsp;&nbsp;t.data&nbsp;=&nbsp;vif.prdata;&nbsp;&nbsp;<span style="color: #5c6370;font-style: italic;line-height: 26px;">//采样数据</span><br>&nbsp;&nbsp;repeat(t.idle_cycles)&nbsp;<span style="color: #c678dd;line-height: 26px;">this</span>.do_idle();<br>endtask:&nbsp;<span style="line-height: 26px;">do_read<br><br>task&nbsp;<span style="color: #61aeee;line-height: 26px;">apb_master_driver::do_idle</span><span style="line-height: 26px;">()</span></span>;<br>&nbsp;&nbsp;`uvm_info(get_type_name(),&nbsp;<span style="color: #98c379;line-height: 26px;">"do_idle&nbsp;..."</span>,&nbsp;UVM_HIGH)<br>&nbsp;&nbsp;@(vif.cb_mst);<br>&nbsp;&nbsp;<span style="color: #5c6370;font-style: italic;line-height: 26px;">//根据协议，paddr、pwrite可以保持不变，等待下一次的传输，这是为了省电</span><br>&nbsp;&nbsp;<span style="color: #5c6370;font-style: italic;line-height: 26px;">//vif.cb_mst.paddr&nbsp;&lt;=&nbsp;0;</span><br>&nbsp;&nbsp;<span style="color: #5c6370;font-style: italic;line-height: 26px;">//vif.cb_mst.pwrite&nbsp;&lt;=&nbsp;0;</span><br>&nbsp;&nbsp;vif.cb_mst.psel&nbsp;&lt;=&nbsp;<span style="color: #d19a66;line-height: 26px;">0</span>;<br>&nbsp;&nbsp;vif.cb_mst.penable&nbsp;&lt;=&nbsp;<span style="color: #d19a66;line-height: 26px;">0</span>;<br>&nbsp;&nbsp;vif.cb_mst.pwdata&nbsp;&lt;=&nbsp;<span style="color: #d19a66;line-height: 26px;">0</span>;<br>endtask:do_idle<br></code></pre>
  <h1 data-tool="mdnice编辑器" style="font-weight: bold;color: black;font-size: 24px;text-align: center;background-image: url(&quot;http://file.custom.com/view/125794260131774464&quot;);background-position: center top;background-repeat: no-repeat;background-size: 75px;line-height: 95px;margin-top: 38px;margin-bottom: 10px;"><span style="display: none;"></span><span style="font-size: 20px;color: #48b378;border-bottom: 2px solid #2e7950;">五、<code>apb_master_monitor.sv</code>代码分析</span></h1>
  <p data-tool="mdnice编辑器" style="padding-bottom: 8px;padding-top: 1em;color: rgb(74, 74, 74);line-height: 1.75em;"><strong style="line-height: 1.75em;"><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">collect_transfer()</code>方法</strong></p>
  <p data-tool="mdnice编辑器" style="padding-bottom: 8px;padding-top: 1em;color: rgb(74, 74, 74);line-height: 1.75em;">在时钟上升沿，同时<code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">psel=1</code>和<code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">penabl=0</code>的时候，判断当前情况下<code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">pwrite</code>信号，在第二个周期进行读或者写操作。</p>
  <pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block;background: url(&quot;http://file.custom.com/view/125794260081442816&quot;) 10px 10px / 40px no-repeat rgb(40, 44, 52);height: 30px;width: 100%;margin-bottom: -7px;border-radius: 5px;"></span><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="line-height: 26px;">task&nbsp;<span style="color: #61aeee;line-height: 26px;">apb_master_monitor::collect_transfer</span><span style="line-height: 26px;">()</span></span>;<br>&nbsp;&nbsp;apb_transfer&nbsp;t;<br>&nbsp;&nbsp;<span style="color: #5c6370;font-style: italic;line-height: 26px;">//&nbsp;Advance&nbsp;clock</span><br>&nbsp;&nbsp;@(vif.cb_mon);<br>&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">if</span>(vif.cb_slv.psel&nbsp;===&nbsp;<span style="color: #d19a66;line-height: 26px;">1'b</span>1&nbsp;&amp;&amp;&nbsp;vif.cb_slv.penable&nbsp;===&nbsp;<span style="color: #d19a66;line-height: 26px;">1'b</span>0)&nbsp;begin<br>&nbsp;&nbsp;&nbsp;&nbsp;t&nbsp;=&nbsp;apb_transfer::type_id::create(<span style="color: #98c379;line-height: 26px;">"t"</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">case</span>(vif.cb_slv.pwrite)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #d19a66;line-height: 26px;">1'b</span>1&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;begin<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@(vif.cb_mon);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t.addr&nbsp;=&nbsp;vif.cb_mon.paddr;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t.data&nbsp;=&nbsp;vif.cb_mon.pwdata;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t.trans_kind&nbsp;=&nbsp;WRITE;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #d19a66;line-height: 26px;">1'b</span>0&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;begin<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@(vif.cb_mon);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t.addr&nbsp;=&nbsp;vif.cb_mon.paddr;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t.data&nbsp;=&nbsp;vif.cb_mon.prdata;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t.trans_kind&nbsp;=&nbsp;READ;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">default</span>&nbsp;:&nbsp;`uvm_error(get_type_name(),&nbsp;<span style="color: #98c379;line-height: 26px;">"ERROR&nbsp;pwrite&nbsp;signal&nbsp;value"</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;endcase<br>&nbsp;&nbsp;&nbsp;&nbsp;item_collected_port.write(t);<br>&nbsp;&nbsp;end<br>endtask:&nbsp;collect_transfer<br></code></pre>
  <h1 data-tool="mdnice编辑器" style="font-weight: bold;color: black;font-size: 24px;text-align: center;background-image: url(&quot;http://file.custom.com/view/125794260131774464&quot;);background-position: center top;background-repeat: no-repeat;background-size: 75px;line-height: 95px;margin-top: 38px;margin-bottom: 10px;"><span style="display: none;"></span><span style="font-size: 20px;color: #48b378;border-bottom: 2px solid #2e7950;">六、<code>apb_master_seq_lib.sv</code>代码分析</span></h1>
  <p data-tool="mdnice编辑器" style="padding-bottom: 8px;padding-top: 1em;color: rgb(74, 74, 74);line-height: 1.75em;"><strong style="line-height: 1.75em;"><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">apb_master_single_write_sequence</code>类</strong></p>
  <p data-tool="mdnice编辑器" style="padding-bottom: 8px;padding-top: 1em;color: rgb(74, 74, 74);line-height: 1.75em;">使用宏<code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">'uvm_do_with</code>发送数据。</p>
  <pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block;background: url(&quot;http://file.custom.com/view/125794260081442816&quot;) 10px 10px / 40px no-repeat rgb(40, 44, 52);height: 30px;width: 100%;margin-bottom: -7px;border-radius: 5px;"></span><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="line-height: 26px;"><span style="color: #c678dd;line-height: 26px;">class</span>&nbsp;<span style="color: #e6c07b;line-height: 26px;">apb_master_single_write_sequence</span>&nbsp;<span style="color: #e6c07b;line-height: 26px;">extends</span>&nbsp;<span style="color: #e6c07b;line-height: 26px;">apb_master_base_sequence</span>;</span><br>&nbsp;&nbsp;rand&nbsp;bit&nbsp;[<span style="color: #d19a66;line-height: 26px;">31</span>:<span style="color: #d19a66;line-height: 26px;">0</span>]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;addr;<br>&nbsp;&nbsp;rand&nbsp;bit&nbsp;[<span style="color: #d19a66;line-height: 26px;">31</span>:<span style="color: #d19a66;line-height: 26px;">0</span>]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data;<br><br>&nbsp;&nbsp;`uvm_object_utils(apb_master_single_write_sequence)&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;<span style="line-height: 26px;">function&nbsp;<span style="color: #61aeee;line-height: 26px;">new</span><span style="line-height: 26px;">(<span style="color: #e6c07b;line-height: 26px;">string</span>&nbsp;name=<span style="color: #98c379;line-height: 26px;">""</span>)</span></span>;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;super.<span style="color: #c678dd;line-height: 26px;">new</span>(name);<br>&nbsp;&nbsp;endfunction&nbsp;:&nbsp;<span style="color: #c678dd;line-height: 26px;">new</span><br><br>&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">virtual</span>&nbsp;task&nbsp;body();<br>&nbsp;&nbsp;&nbsp;&nbsp;`uvm_info(get_type_name(),<span style="color: #98c379;line-height: 26px;">"Starting&nbsp;sequence"</span>,&nbsp;UVM_HIGH)<br>&nbsp;&nbsp;&nbsp;`uvm_do_with(req,&nbsp;{trans_kind&nbsp;==&nbsp;WRITE;&nbsp;addr&nbsp;==&nbsp;local::addr;&nbsp;data&nbsp;==&nbsp;local::data;})<br>&nbsp;&nbsp;&nbsp;&nbsp;get_response(rsp);<br>&nbsp;&nbsp;&nbsp;&nbsp;`uvm_info(get_type_name(),$psprintf(<span style="color: #98c379;line-height: 26px;">"Done&nbsp;sequence:&nbsp;%s"</span>,req.convert2string()),&nbsp;UVM_HIGH)<br>&nbsp;&nbsp;endtask:&nbsp;body<br><br>endclass:&nbsp;apb_master_single_write_sequence<br></code></pre>
  <p data-tool="mdnice编辑器" style="padding-bottom: 8px;padding-top: 1em;color: rgb(74, 74, 74);line-height: 1.75em;"><strong style="line-height: 1.75em;"><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">apb_master_single_read_sequence</code>类</strong></p>
  <p data-tool="mdnice编辑器" style="padding-bottom: 8px;padding-top: 1em;color: rgb(74, 74, 74);line-height: 1.75em;">读操作，拿到返回的<code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">rsp</code>的数据后存储在成员变量<code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">data</code>里。</p>
  <pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block;background: url(&quot;http://file.custom.com/view/125794260081442816&quot;) 10px 10px / 40px no-repeat rgb(40, 44, 52);height: 30px;width: 100%;margin-bottom: -7px;border-radius: 5px;"></span><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="line-height: 26px;"><span style="color: #c678dd;line-height: 26px;">class</span>&nbsp;<span style="color: #e6c07b;line-height: 26px;">apb_master_single_read_sequence</span>&nbsp;<span style="color: #e6c07b;line-height: 26px;">extends</span>&nbsp;<span style="color: #e6c07b;line-height: 26px;">apb_master_base_sequence</span>;</span><br>&nbsp;&nbsp;rand&nbsp;bit&nbsp;[<span style="color: #d19a66;line-height: 26px;">31</span>:<span style="color: #d19a66;line-height: 26px;">0</span>]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;addr;<br>&nbsp;&nbsp;rand&nbsp;bit&nbsp;[<span style="color: #d19a66;line-height: 26px;">31</span>:<span style="color: #d19a66;line-height: 26px;">0</span>]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data;<br><br>&nbsp;&nbsp;`uvm_object_utils(apb_master_single_read_sequence)&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;<span style="line-height: 26px;">function&nbsp;<span style="color: #61aeee;line-height: 26px;">new</span><span style="line-height: 26px;">(<span style="color: #e6c07b;line-height: 26px;">string</span>&nbsp;name=<span style="color: #98c379;line-height: 26px;">""</span>)</span></span>;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;super.<span style="color: #c678dd;line-height: 26px;">new</span>(name);<br>&nbsp;&nbsp;endfunction&nbsp;:&nbsp;<span style="color: #c678dd;line-height: 26px;">new</span><br><br>&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">virtual</span>&nbsp;task&nbsp;body();<br>&nbsp;&nbsp;&nbsp;&nbsp;`uvm_info(get_type_name(),<span style="color: #98c379;line-height: 26px;">"Starting&nbsp;sequence"</span>,&nbsp;UVM_HIGH)<br>&nbsp;&nbsp;&nbsp;`uvm_do_with(req,&nbsp;{trans_kind&nbsp;==&nbsp;READ;&nbsp;addr&nbsp;==&nbsp;local::addr;})<br>&nbsp;&nbsp;&nbsp;&nbsp;get_response(rsp);<br>&nbsp;&nbsp;&nbsp;&nbsp;data&nbsp;=&nbsp;rsp.data;<br>&nbsp;&nbsp;&nbsp;&nbsp;`uvm_info(get_type_name(),$psprintf(<span style="color: #98c379;line-height: 26px;">"Done&nbsp;sequence:&nbsp;%s"</span>,req.convert2string()),&nbsp;UVM_HIGH)<br>&nbsp;&nbsp;endtask:&nbsp;body<br><br>endclass:&nbsp;apb_master_single_read_sequence<br></code></pre>
  <p data-tool="mdnice编辑器" style="padding-bottom: 8px;padding-top: 1em;color: rgb(74, 74, 74);line-height: 1.75em;"><strong style="line-height: 1.75em;"><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">apb_master_write_read_sequence</code>类</strong></p>
  <p data-tool="mdnice编辑器" style="padding-bottom: 8px;padding-top: 1em;color: rgb(74, 74, 74);line-height: 1.75em;">写操作后进行读操作，所以<code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">idle_cycles == 0</code></p>
  <pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block;background: url(&quot;http://file.custom.com/view/125794260081442816&quot;) 10px 10px / 40px no-repeat rgb(40, 44, 52);height: 30px;width: 100%;margin-bottom: -7px;border-radius: 5px;"></span><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="line-height: 26px;"><span style="color: #c678dd;line-height: 26px;">class</span>&nbsp;<span style="color: #e6c07b;line-height: 26px;">apb_master_write_read_sequence</span>&nbsp;<span style="color: #e6c07b;line-height: 26px;">extends</span>&nbsp;<span style="color: #e6c07b;line-height: 26px;">apb_master_base_sequence</span>;</span><br>&nbsp;&nbsp;rand&nbsp;bit&nbsp;[<span style="color: #d19a66;line-height: 26px;">31</span>:<span style="color: #d19a66;line-height: 26px;">0</span>]&nbsp;&nbsp;&nbsp;&nbsp;addr;<br>&nbsp;&nbsp;rand&nbsp;bit&nbsp;[<span style="color: #d19a66;line-height: 26px;">31</span>:<span style="color: #d19a66;line-height: 26px;">0</span>]&nbsp;&nbsp;&nbsp;&nbsp;data;<br>&nbsp;&nbsp;rand&nbsp;<span style="color: #c678dd;line-height: 26px;">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;idle_cycles;&nbsp;<br>&nbsp;&nbsp;constraint&nbsp;cstr{<br>&nbsp;&nbsp;&nbsp;&nbsp;idle_cycles&nbsp;==&nbsp;<span style="color: #d19a66;line-height: 26px;">0</span>;<br>&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;`uvm_object_utils(apb_master_write_read_sequence)&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;<span style="line-height: 26px;">function&nbsp;<span style="color: #61aeee;line-height: 26px;">new</span><span style="line-height: 26px;">(<span style="color: #e6c07b;line-height: 26px;">string</span>&nbsp;name=<span style="color: #98c379;line-height: 26px;">""</span>)</span></span>;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;super.<span style="color: #c678dd;line-height: 26px;">new</span>(name);<br>&nbsp;&nbsp;endfunction&nbsp;:&nbsp;<span style="color: #c678dd;line-height: 26px;">new</span><br><br>&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">virtual</span>&nbsp;task&nbsp;body();<br>&nbsp;&nbsp;&nbsp;&nbsp;`uvm_info(get_type_name(),<span style="color: #98c379;line-height: 26px;">"Starting&nbsp;sequence"</span>,&nbsp;UVM_HIGH)<br>&nbsp;&nbsp;&nbsp;`uvm_do_with(req,&nbsp;&nbsp;{trans_kind&nbsp;==&nbsp;WRITE;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;addr&nbsp;==&nbsp;local::addr;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data&nbsp;==&nbsp;local::data;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;idle_cycles&nbsp;==&nbsp;local::idle_cycles;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})<br>&nbsp;&nbsp;&nbsp;&nbsp;get_response(rsp);<br>&nbsp;&nbsp;&nbsp;&nbsp;`uvm_do_with(req,&nbsp;{trans_kind&nbsp;==&nbsp;READ;&nbsp;addr&nbsp;==&nbsp;local::addr;})<br>&nbsp;&nbsp;&nbsp;&nbsp;get_response(rsp);<br>&nbsp;&nbsp;&nbsp;&nbsp;data&nbsp;=&nbsp;rsp.data;<br>&nbsp;&nbsp;&nbsp;&nbsp;`uvm_info(get_type_name(),$psprintf(<span style="color: #98c379;line-height: 26px;">"Done&nbsp;sequence:&nbsp;%s"</span>,req.convert2string()),&nbsp;UVM_HIGH)<br>&nbsp;&nbsp;endtask:&nbsp;body<br><br>endclass:&nbsp;apb_master_write_read_sequence<br></code></pre>
  <p data-tool="mdnice编辑器" style="padding-bottom: 8px;padding-top: 1em;color: rgb(74, 74, 74);line-height: 1.75em;"><strong style="line-height: 1.75em;"><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">apb_master_burst_write_sequence</code>类</strong></p>
  <p data-tool="mdnice编辑器" style="padding-bottom: 8px;padding-top: 1em;color: rgb(74, 74, 74);line-height: 1.75em;">连续的写操作，按照地址增长的顺序，把所有的数据写到<code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">data</code>数组中。因为是连续写操作，所以<code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">idle_cycles == 0</code>，即数据之间没有空闲周期。</p>
  <pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block;background: url(&quot;http://file.custom.com/view/125794260081442816&quot;) 10px 10px / 40px no-repeat rgb(40, 44, 52);height: 30px;width: 100%;margin-bottom: -7px;border-radius: 5px;"></span><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="line-height: 26px;"><span style="color: #c678dd;line-height: 26px;">class</span>&nbsp;<span style="color: #e6c07b;line-height: 26px;">apb_master_burst_write_sequence</span>&nbsp;<span style="color: #e6c07b;line-height: 26px;">extends</span>&nbsp;<span style="color: #e6c07b;line-height: 26px;">apb_master_base_sequence</span>;</span><br>&nbsp;&nbsp;rand&nbsp;bit&nbsp;[<span style="color: #d19a66;line-height: 26px;">31</span>:<span style="color: #d19a66;line-height: 26px;">0</span>]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;addr;<br>&nbsp;&nbsp;rand&nbsp;bit&nbsp;[<span style="color: #d19a66;line-height: 26px;">31</span>:<span style="color: #d19a66;line-height: 26px;">0</span>]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data[];<br>&nbsp;&nbsp;constraint&nbsp;cstr{<br>&nbsp;&nbsp;&nbsp;&nbsp;soft&nbsp;data.size()&nbsp;inside&nbsp;{<span style="color: #d19a66;line-height: 26px;">4</span>,&nbsp;<span style="color: #d19a66;line-height: 26px;">8</span>,&nbsp;<span style="color: #d19a66;line-height: 26px;">16</span>,&nbsp;<span style="color: #d19a66;line-height: 26px;">32</span>};<br>&nbsp;&nbsp;&nbsp;&nbsp;foreach(data[i])&nbsp;soft&nbsp;data[i]&nbsp;==&nbsp;addr&nbsp;+&nbsp;(i&nbsp;&lt;&lt;&nbsp;<span style="color: #d19a66;line-height: 26px;">2</span>);<br>&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;`uvm_object_utils(apb_master_burst_write_sequence)&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;<span style="line-height: 26px;">function&nbsp;<span style="color: #61aeee;line-height: 26px;">new</span><span style="line-height: 26px;">(<span style="color: #e6c07b;line-height: 26px;">string</span>&nbsp;name=<span style="color: #98c379;line-height: 26px;">""</span>)</span></span>;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;super.<span style="color: #c678dd;line-height: 26px;">new</span>(name);<br>&nbsp;&nbsp;endfunction&nbsp;:&nbsp;<span style="color: #c678dd;line-height: 26px;">new</span><br><br>&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">virtual</span>&nbsp;task&nbsp;body();<br>&nbsp;&nbsp;&nbsp;&nbsp;`uvm_info(get_type_name(),<span style="color: #98c379;line-height: 26px;">"Starting&nbsp;sequence"</span>,&nbsp;UVM_HIGH)<br>&nbsp;&nbsp;&nbsp;&nbsp;foreach(data[i])&nbsp;begin<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`uvm_do_with(req,&nbsp;{trans_kind&nbsp;==&nbsp;WRITE;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;addr&nbsp;==&nbsp;local::addr&nbsp;+&nbsp;(i&lt;&lt;<span style="color: #d19a66;line-height: 26px;">2</span>);&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data&nbsp;==&nbsp;local::data[i];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;idle_cycles&nbsp;==&nbsp;<span style="color: #d19a66;line-height: 26px;">0</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get_response(rsp);<br>&nbsp;&nbsp;&nbsp;&nbsp;end<br>&nbsp;&nbsp;&nbsp;&nbsp;`uvm_do_with(req,&nbsp;{trans_kind&nbsp;==&nbsp;IDLE;})<br>&nbsp;&nbsp;&nbsp;&nbsp;get_response(rsp);<br>&nbsp;&nbsp;&nbsp;&nbsp;`uvm_info(get_type_name(),$psprintf(<span style="color: #98c379;line-height: 26px;">"Done&nbsp;sequence:&nbsp;%s"</span>,req.convert2string()),&nbsp;UVM_HIGH)<br>&nbsp;&nbsp;endtask:&nbsp;body<br>endclass:&nbsp;apb_master_burst_write_sequence<br></code></pre>
  <p data-tool="mdnice编辑器" style="padding-bottom: 8px;padding-top: 1em;color: rgb(74, 74, 74);line-height: 1.75em;"><strong style="line-height: 1.75em;"><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">apb_master_burst_read_sequence</code>类</strong></p>
  <p data-tool="mdnice编辑器" style="padding-bottom: 8px;padding-top: 1em;color: rgb(74, 74, 74);line-height: 1.75em;">连续的读操作，每次读取回来的数据，从<code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">rsp</code>中拿出来放到<code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">data</code>数组中。全部读取完成之后，将总线置为<code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">IDLE</code>。</p>
  <pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block;background: url(&quot;http://file.custom.com/view/125794260081442816&quot;) 10px 10px / 40px no-repeat rgb(40, 44, 52);height: 30px;width: 100%;margin-bottom: -7px;border-radius: 5px;"></span><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="line-height: 26px;"><span style="color: #c678dd;line-height: 26px;">class</span>&nbsp;<span style="color: #e6c07b;line-height: 26px;">apb_master_burst_read_sequence</span>&nbsp;<span style="color: #e6c07b;line-height: 26px;">extends</span>&nbsp;<span style="color: #e6c07b;line-height: 26px;">apb_master_base_sequence</span>;</span><br>&nbsp;&nbsp;rand&nbsp;bit&nbsp;[<span style="color: #d19a66;line-height: 26px;">31</span>:<span style="color: #d19a66;line-height: 26px;">0</span>]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;addr;<br>&nbsp;&nbsp;rand&nbsp;bit&nbsp;[<span style="color: #d19a66;line-height: 26px;">31</span>:<span style="color: #d19a66;line-height: 26px;">0</span>]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data[];<br>&nbsp;&nbsp;constraint&nbsp;cstr{<br>&nbsp;&nbsp;&nbsp;&nbsp;soft&nbsp;data.size()&nbsp;inside&nbsp;{<span style="color: #d19a66;line-height: 26px;">4</span>,&nbsp;<span style="color: #d19a66;line-height: 26px;">8</span>,&nbsp;<span style="color: #d19a66;line-height: 26px;">16</span>,&nbsp;<span style="color: #d19a66;line-height: 26px;">32</span>};<br>&nbsp;&nbsp;}<br>&nbsp;&nbsp;`uvm_object_utils(apb_master_burst_read_sequence)<br>&nbsp;&nbsp;<span style="line-height: 26px;">function&nbsp;<span style="color: #61aeee;line-height: 26px;">new</span><span style="line-height: 26px;">(<span style="color: #e6c07b;line-height: 26px;">string</span>&nbsp;name=<span style="color: #98c379;line-height: 26px;">""</span>)</span></span>;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;super.<span style="color: #c678dd;line-height: 26px;">new</span>(name);<br>&nbsp;&nbsp;endfunction&nbsp;:&nbsp;<span style="color: #c678dd;line-height: 26px;">new</span><br><br>&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">virtual</span>&nbsp;task&nbsp;body();<br>&nbsp;&nbsp;&nbsp;&nbsp;`uvm_info(get_type_name(),<span style="color: #98c379;line-height: 26px;">"Starting&nbsp;sequence"</span>,&nbsp;UVM_HIGH)<br>&nbsp;&nbsp;&nbsp;&nbsp;foreach(data[i])&nbsp;begin<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`uvm_do_with(req,&nbsp;{trans_kind&nbsp;==&nbsp;READ;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;addr&nbsp;==&nbsp;local::addr&nbsp;+&nbsp;(i&lt;&lt;<span style="color: #d19a66;line-height: 26px;">2</span>);&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;idle_cycles&nbsp;==&nbsp;<span style="color: #d19a66;line-height: 26px;">0</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get_response(rsp);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data[i]&nbsp;=&nbsp;rsp.data;<br>&nbsp;&nbsp;&nbsp;&nbsp;end<br>&nbsp;&nbsp;&nbsp;&nbsp;`uvm_do_with(req,&nbsp;{trans_kind&nbsp;==&nbsp;IDLE;})<br>&nbsp;&nbsp;&nbsp;&nbsp;get_response(rsp);<br>&nbsp;&nbsp;&nbsp;&nbsp;`uvm_info(get_type_name(),$psprintf(<span style="color: #98c379;line-height: 26px;">"Done&nbsp;sequence:&nbsp;%s"</span>,req.convert2string()),&nbsp;UVM_HIGH)<br>&nbsp;&nbsp;endtask:&nbsp;body<br>endclass:&nbsp;apb_master_burst_read_sequence<br></code></pre>
  <h1 data-tool="mdnice编辑器" style="font-weight: bold;color: black;font-size: 24px;text-align: center;background-image: url(&quot;http://file.custom.com/view/125794260131774464&quot;);background-position: center top;background-repeat: no-repeat;background-size: 75px;line-height: 95px;margin-top: 38px;margin-bottom: 10px;"><span style="display: none;"></span><span style="font-size: 20px;color: #48b378;border-bottom: 2px solid #2e7950;">七、apb_slave_driver.sv代码分析</span></h1>
  <p data-tool="mdnice编辑器" style="padding-bottom: 8px;padding-top: 1em;color: rgb(74, 74, 74);line-height: 1.75em;"><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">slave</code>要接收<code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">master</code>发送过来的数据，所以要模拟一个存储功能，即关联数组<code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">mem</code>。</p>
  <pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block;background: url(&quot;http://file.custom.com/view/125794260081442816&quot;) 10px 10px / 40px no-repeat rgb(40, 44, 52);height: 30px;width: 100%;margin-bottom: -7px;border-radius: 5px;"></span><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;">&nbsp;&nbsp;bit[<span style="color: #d19a66;line-height: 26px;">31</span>:<span style="color: #d19a66;line-height: 26px;">0</span>]&nbsp;mem&nbsp;[bit[<span style="color: #d19a66;line-height: 26px;">31</span>:<span style="color: #d19a66;line-height: 26px;">0</span>]];<br></code></pre>
  <p data-tool="mdnice编辑器" style="padding-bottom: 8px;padding-top: 1em;color: rgb(74, 74, 74);line-height: 1.75em;"><strong style="line-height: 1.75em;"><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">run()</code>方法</strong></p>
  <p data-tool="mdnice编辑器" style="padding-bottom: 8px;padding-top: 1em;color: rgb(74, 74, 74);line-height: 1.75em;">三个方法并行执行</p>
  <pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block;background: url(&quot;http://file.custom.com/view/125794260081442816&quot;) 10px 10px / 40px no-repeat rgb(40, 44, 52);height: 30px;width: 100%;margin-bottom: -7px;border-radius: 5px;"></span><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="line-height: 26px;">task&nbsp;<span style="color: #61aeee;line-height: 26px;">apb_slave_driver::run</span><span style="line-height: 26px;">()</span></span>;<br>&nbsp;&nbsp;&nbsp;<span style="line-height: 26px;">fork<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #61aeee;line-height: 26px;">get_and_drive</span><span style="line-height: 26px;">()</span></span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reset_listener();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;drive_response();<br>&nbsp;&nbsp;&nbsp;join_none<br>endtask&nbsp;:&nbsp;run<br></code></pre>
  <p data-tool="mdnice编辑器" style="padding-bottom: 8px;padding-top: 1em;color: rgb(74, 74, 74);line-height: 1.75em;"><strong style="line-height: 1.75em;"><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">get_and_drive()</code>方法</strong></p>
  <pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block;background: url(&quot;http://file.custom.com/view/125794260081442816&quot;) 10px 10px / 40px no-repeat rgb(40, 44, 52);height: 30px;width: 100%;margin-bottom: -7px;border-radius: 5px;"></span><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="line-height: 26px;">task&nbsp;<span style="color: #61aeee;line-height: 26px;">apb_slave_driver::get_and_drive</span><span style="line-height: 26px;">()</span></span>;<br>&nbsp;&nbsp;forever&nbsp;begin<br>&nbsp;&nbsp;&nbsp;&nbsp;seq_item_port.get_next_item(req);<br>&nbsp;&nbsp;&nbsp;&nbsp;`uvm_info(get_type_name(),&nbsp;<span style="color: #98c379;line-height: 26px;">"sequencer&nbsp;got&nbsp;next&nbsp;item"</span>,&nbsp;UVM_HIGH)<br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">void</span><span style="color: #d19a66;line-height: 26px;">'</span>($cast(rsp,&nbsp;req.clone()));<br>&nbsp;&nbsp;&nbsp;&nbsp;rsp.set_sequence_id(req.get_sequence_id());<br>&nbsp;&nbsp;&nbsp;&nbsp;seq_item_port.item_done(rsp);<br>&nbsp;&nbsp;&nbsp;&nbsp;`uvm_info(get_type_name(),&nbsp;<span style="color: #98c379;line-height: 26px;">"sequencer&nbsp;item_done_triggered"</span>,&nbsp;UVM_HIGH)<br>&nbsp;&nbsp;end<br>endtask&nbsp;:&nbsp;get_and_drive<br></code></pre>
  <p data-tool="mdnice编辑器" style="padding-bottom: 8px;padding-top: 1em;color: rgb(74, 74, 74);line-height: 1.75em;"><strong style="line-height: 1.75em;"><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">reset_listener()</code>方法</strong></p>
  <p data-tool="mdnice编辑器" style="padding-bottom: 8px;padding-top: 1em;color: rgb(74, 74, 74);line-height: 1.75em;">等待复位信号，将<code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">prdata &lt;= 0</code>，同时清空<code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">mem</code>里面的数据。</p>
  <pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block;background: url(&quot;http://file.custom.com/view/125794260081442816&quot;) 10px 10px / 40px no-repeat rgb(40, 44, 52);height: 30px;width: 100%;margin-bottom: -7px;border-radius: 5px;"></span><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="line-height: 26px;">task&nbsp;<span style="color: #61aeee;line-height: 26px;">apb_slave_driver::reset_listener</span><span style="line-height: 26px;">()</span></span>;<br>&nbsp;&nbsp;`uvm_info(get_type_name(),&nbsp;<span style="color: #98c379;line-height: 26px;">"reset_listener&nbsp;..."</span>,&nbsp;UVM_HIGH)<br>&nbsp;&nbsp;fork<br>&nbsp;&nbsp;&nbsp;&nbsp;forever&nbsp;begin<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@(negedge&nbsp;vif.rstn);&nbsp;<span style="color: #5c6370;font-style: italic;line-height: 26px;">//&nbsp;ASYNC&nbsp;reset</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vif.prdata&nbsp;&lt;=&nbsp;<span style="color: #d19a66;line-height: 26px;">0</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">this</span>.mem.<span style="color: #c678dd;line-height: 26px;">delete</span>();&nbsp;<span style="color: #5c6370;font-style: italic;line-height: 26px;">//&nbsp;reset&nbsp;internal&nbsp;memory</span><br>&nbsp;&nbsp;&nbsp;&nbsp;end<br>&nbsp;&nbsp;join_none<br>endtask:&nbsp;reset_listener<br></code></pre>
  <p data-tool="mdnice编辑器" style="padding-bottom: 8px;padding-top: 1em;color: rgb(74, 74, 74);line-height: 1.75em;"><strong style="line-height: 1.75em;"><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">drive_response()</code>方法</strong></p>
  <p data-tool="mdnice编辑器" style="padding-bottom: 8px;padding-top: 1em;color: rgb(74, 74, 74);line-height: 1.75em;">如果当前这一周期是SETUP阶段，即<code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">psel = 1 &amp;&amp; penable = 0</code>，进而判断是写操作还是读操作，然后调用相对应的方法。</p>
  <pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block;background: url(&quot;http://file.custom.com/view/125794260081442816&quot;) 10px 10px / 40px no-repeat rgb(40, 44, 52);height: 30px;width: 100%;margin-bottom: -7px;border-radius: 5px;"></span><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="line-height: 26px;">task&nbsp;<span style="color: #61aeee;line-height: 26px;">apb_slave_driver::drive_response</span><span style="line-height: 26px;">()</span></span>;<br>&nbsp;&nbsp;`uvm_info(get_type_name(),&nbsp;<span style="color: #98c379;line-height: 26px;">"drive_response"</span>,&nbsp;UVM_HIGH)<br>&nbsp;&nbsp;forever&nbsp;begin<br>&nbsp;&nbsp;&nbsp;&nbsp;@(vif.cb_slv);<br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">if</span>(vif.cb_slv.psel&nbsp;===&nbsp;<span style="color: #d19a66;line-height: 26px;">1'b</span>1&nbsp;&amp;&amp;&nbsp;vif.cb_slv.penable&nbsp;===&nbsp;<span style="color: #d19a66;line-height: 26px;">1'b</span>0)&nbsp;<span style="line-height: 26px;">begin<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #61aeee;line-height: 26px;">case</span><span style="line-height: 26px;">(vif.cb_slv.pwrite)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1'b1&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;<span style="color: #c678dd;line-height: 26px;">this</span>.<span style="color: #61aeee;line-height: 26px;">do_write</span><span style="line-height: 26px;">()</span></span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #d19a66;line-height: 26px;">1'b</span>0&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;<span style="color: #c678dd;line-height: 26px;">this</span>.do_read();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">default</span>&nbsp;:&nbsp;`uvm_error(get_type_name(),&nbsp;<span style="color: #98c379;line-height: 26px;">"ERROR&nbsp;pwrite&nbsp;signal&nbsp;value"</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;endcase<br>&nbsp;&nbsp;&nbsp;&nbsp;end<br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">else</span>&nbsp;begin<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">this</span>.do_idle();<br>&nbsp;&nbsp;&nbsp;&nbsp;end<br>&nbsp;&nbsp;end<br>endtask&nbsp;:&nbsp;drive_response<br></code></pre>
  <p data-tool="mdnice编辑器" style="padding-bottom: 8px;padding-top: 1em;color: rgb(74, 74, 74);line-height: 1.75em;"><strong style="line-height: 1.75em;"><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">do_write()</code>方法</strong></p>
  <p data-tool="mdnice编辑器" style="padding-bottom: 8px;padding-top: 1em;color: rgb(74, 74, 74);line-height: 1.75em;">如果是写操作，那么等待时钟下一拍，拿到<code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">addr</code>和<code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">data</code>并放到<code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">mem</code>中。</p>
  <pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block;background: url(&quot;http://file.custom.com/view/125794260081442816&quot;) 10px 10px / 40px no-repeat rgb(40, 44, 52);height: 30px;width: 100%;margin-bottom: -7px;border-radius: 5px;"></span><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="line-height: 26px;">task&nbsp;<span style="color: #61aeee;line-height: 26px;">apb_slave_driver::do_write</span><span style="line-height: 26px;">()</span></span>;<br>&nbsp;&nbsp;bit[<span style="color: #d19a66;line-height: 26px;">31</span>:<span style="color: #d19a66;line-height: 26px;">0</span>]&nbsp;addr;<br>&nbsp;&nbsp;bit[<span style="color: #d19a66;line-height: 26px;">31</span>:<span style="color: #d19a66;line-height: 26px;">0</span>]&nbsp;data;<br>&nbsp;&nbsp;`uvm_info(get_type_name(),&nbsp;<span style="color: #98c379;line-height: 26px;">"do_write"</span>,&nbsp;UVM_HIGH)<br>&nbsp;&nbsp;@(vif.cb_slv);<br>&nbsp;&nbsp;addr&nbsp;=&nbsp;vif.cb_slv.paddr;<br>&nbsp;&nbsp;data&nbsp;=&nbsp;vif.cb_slv.pwdata;<br>&nbsp;&nbsp;mem[addr]&nbsp;=&nbsp;data;<br>endtask:&nbsp;do_write<br></code></pre>
  <p data-tool="mdnice编辑器" style="padding-bottom: 8px;padding-top: 1em;color: rgb(74, 74, 74);line-height: 1.75em;"><strong style="line-height: 1.75em;"><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">do_read()</code>方法</strong></p>
  <p data-tool="mdnice编辑器" style="padding-bottom: 8px;padding-top: 1em;color: rgb(74, 74, 74);line-height: 1.75em;">如果是读操作，等待<code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">penable=1</code>，并且判断<code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">mem</code>中是否写过该<code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">addr</code>，如果有则写入<code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">data</code>，没有则将data置为0，即还是初始化的数据。等待一个延迟后，将<code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">data</code>驱动到总线上面。</p>
  <pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block;background: url(&quot;http://file.custom.com/view/125794260081442816&quot;) 10px 10px / 40px no-repeat rgb(40, 44, 52);height: 30px;width: 100%;margin-bottom: -7px;border-radius: 5px;"></span><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="line-height: 26px;">task&nbsp;<span style="color: #61aeee;line-height: 26px;">apb_slave_driver::do_read</span><span style="line-height: 26px;">()</span></span>;<br>&nbsp;&nbsp;bit[<span style="color: #d19a66;line-height: 26px;">31</span>:<span style="color: #d19a66;line-height: 26px;">0</span>]&nbsp;addr;<br>&nbsp;&nbsp;bit[<span style="color: #d19a66;line-height: 26px;">31</span>:<span style="color: #d19a66;line-height: 26px;">0</span>]&nbsp;data;<br>&nbsp;&nbsp;`uvm_info(get_type_name(),&nbsp;<span style="color: #98c379;line-height: 26px;">"do_read"</span>,&nbsp;UVM_HIGH)<br>&nbsp;&nbsp;wait(vif.penable&nbsp;===&nbsp;<span style="color: #d19a66;line-height: 26px;">1'b</span>1);<br>&nbsp;&nbsp;addr&nbsp;=&nbsp;vif.cb_slv.paddr;<br>&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">if</span>(mem.exists(addr))<br>&nbsp;&nbsp;&nbsp;&nbsp;data&nbsp;=&nbsp;mem[addr];<br>&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">else</span><br>&nbsp;&nbsp;&nbsp;&nbsp;data&nbsp;=&nbsp;<span style="color: #d19a66;line-height: 26px;">0</span>;<br>&nbsp;&nbsp;#<span style="color: #d19a66;line-height: 26px;">1</span>ps;<br>&nbsp;&nbsp;vif.prdata&nbsp;&lt;=&nbsp;data;<br>&nbsp;&nbsp;@(vif.cb_slv);<br>endtask:&nbsp;do_read<br></code></pre>
  <h1 data-tool="mdnice编辑器" style="font-weight: bold;color: black;font-size: 24px;text-align: center;background-image: url(&quot;http://file.custom.com/view/125794260131774464&quot;);background-position: center top;background-repeat: no-repeat;background-size: 75px;line-height: 95px;margin-top: 38px;margin-bottom: 10px;"><span style="display: none;"></span><span style="font-size: 20px;color: #48b378;border-bottom: 2px solid #2e7950;">八、运行仿真</span></h1>
  <p data-tool="mdnice编辑器" style="padding-bottom: 8px;padding-top: 1em;color: rgb(74, 74, 74);line-height: 1.75em;">执行命令</p>
  <pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block;background: url(&quot;http://file.custom.com/view/125794260081442816&quot;) 10px 10px / 40px no-repeat rgb(40, 44, 52);height: 30px;width: 100%;margin-bottom: -7px;border-radius: 5px;"></span><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;">run&nbsp;-all<br></code></pre>
  <p data-tool="mdnice编辑器" style="padding-bottom: 8px;padding-top: 1em;color: rgb(74, 74, 74);line-height: 1.75em;">验证环境结构<br><img class="rich_pages wxw-img" data-ratio="0.38461538461538464" src="http://file.custom.com/view/125794260325761024" data-type="png" data-w="585" style="display: block;margin-right: auto;margin-left: auto;border-radius: 4px;margin-bottom: 25px;"></p>
  <p data-tool="mdnice编辑器" style="padding-bottom: 8px;padding-top: 1em;color: rgb(74, 74, 74);line-height: 1.75em;">写操作：写入地址和写入数据相同，只有<code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">penable</code>拉高才会写入，数据之间有一个空闲。<br><img class="rich_pages wxw-img" data-ratio="0.6648148148148149" src="http://file.custom.com/view/125794260324712448" data-type="png" data-w="1080" style="display: block;margin-right: auto;margin-left: auto;border-radius: 4px;margin-bottom: 25px;"><br>
   读操作：只有<code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(40, 202, 113);">penable</code>拉高才会读数据，没有写入过数据的地址，读出来的值为0。<br><img class="rich_pages wxw-img" data-ratio="0.4685185185185185" src="http://file.custom.com/view/125794260312129536" data-type="png" data-w="1080" style="display: block;margin-right: auto;margin-left: auto;border-radius: 4px;margin-bottom: 25px;"><br>
   先写后读：<br><img class="rich_pages wxw-img" data-ratio="0.4388888888888889" src="http://file.custom.com/view/125794260290109440" data-type="png" data-w="1080" style="display: block;margin-right: auto;margin-left: auto;border-radius: 4px;margin-bottom: 25px;"><br>
   写完立即读操作：<br><img class="rich_pages wxw-img" data-ratio="0.3962962962962963" src="http://file.custom.com/view/125794260322615296" data-type="png" data-w="1080" style="display: block;margin-right: auto;margin-left: auto;border-radius: 4px;margin-bottom: 25px;"></p>
  <p data-tool="mdnice编辑器" style="padding-bottom: 8px;padding-top: 1em;color: rgb(74, 74, 74);line-height: 1.75em;">仿真结果：</p>
  <p data-tool="mdnice编辑器" style="padding-bottom: 8px;padding-top: 1em;color: rgb(74, 74, 74);line-height: 1.75em;"><img class="rich_pages wxw-img" data-ratio="0.33112582781456956" src="http://file.custom.com/view/125794260081442848" data-type="png" data-w="906" style="display: block;margin-right: auto;margin-left: auto;border-radius: 4px;margin-bottom: 25px;"><br>
   覆盖率：</p>
  <pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block;background: url(&quot;http://file.custom.com/view/125794260081442816&quot;) 10px 10px / 40px no-repeat rgb(40, 44, 52);height: 30px;width: 100%;margin-bottom: -7px;border-radius: 5px;"></span><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;">&nbsp;&nbsp;<span style="color: #5c6370;font-style: italic;line-height: 26px;">//&nbsp;APB&nbsp;command&nbsp;covergroup</span><br>&nbsp;&nbsp;covergroup&nbsp;cg_apb_command&nbsp;@(posedge&nbsp;clk&nbsp;iff&nbsp;rstn);<br>&nbsp;&nbsp;&nbsp;&nbsp;pwrite:&nbsp;coverpoint&nbsp;pwrite{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type_option.weight&nbsp;=&nbsp;<span style="color: #d19a66;line-height: 26px;">0</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bins&nbsp;write&nbsp;=&nbsp;{<span style="color: #d19a66;line-height: 26px;">1</span>};<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bins&nbsp;read&nbsp;&nbsp;=&nbsp;{<span style="color: #d19a66;line-height: 26px;">0</span>};<br><br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;psel&nbsp;:&nbsp;coverpoint&nbsp;psel{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type_option.weight&nbsp;=&nbsp;<span style="color: #d19a66;line-height: 26px;">0</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bins&nbsp;sel&nbsp;&nbsp;&nbsp;=&nbsp;{<span style="color: #d19a66;line-height: 26px;">1</span>};<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bins&nbsp;unsel&nbsp;=&nbsp;{<span style="color: #d19a66;line-height: 26px;">0</span>};<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;cmd&nbsp;&nbsp;:&nbsp;cross&nbsp;pwrite,&nbsp;psel{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bins&nbsp;cmd_write&nbsp;=&nbsp;binsof(psel.sel)&nbsp;&amp;&amp;&nbsp;binsof(pwrite.write);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bins&nbsp;cmd_read&nbsp;&nbsp;=&nbsp;binsof(psel.sel)&nbsp;&amp;&amp;&nbsp;binsof(pwrite.read);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bins&nbsp;cmd_idle&nbsp;&nbsp;=&nbsp;binsof(psel.unsel);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;endgroup<br><br>&nbsp;&nbsp;<span style="color: #5c6370;font-style: italic;line-height: 26px;">//&nbsp;APB&nbsp;transaction&nbsp;timing&nbsp;group</span><br>&nbsp;&nbsp;covergroup&nbsp;cg_apb_trans_timing_group&nbsp;@(posedge&nbsp;clk&nbsp;iff&nbsp;rstn);<br>&nbsp;&nbsp;&nbsp;&nbsp;psel:&nbsp;coverpoint&nbsp;psel{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bins&nbsp;single&nbsp;&nbsp;&nbsp;=&nbsp;(<span style="color: #d19a66;line-height: 26px;">0</span>&nbsp;=&gt;&nbsp;<span style="color: #d19a66;line-height: 26px;">1</span>&nbsp;=&gt;&nbsp;<span style="color: #d19a66;line-height: 26px;">1</span>&nbsp;&nbsp;=&gt;&nbsp;<span style="color: #d19a66;line-height: 26px;">0</span>);&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bins&nbsp;burst_2&nbsp;&nbsp;=&nbsp;(<span style="color: #d19a66;line-height: 26px;">0</span>&nbsp;=&gt;&nbsp;<span style="color: #d19a66;line-height: 26px;">1</span>&nbsp;[*<span style="color: #d19a66;line-height: 26px;">4</span>]&nbsp;&nbsp;=&gt;&nbsp;<span style="color: #d19a66;line-height: 26px;">0</span>);&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bins&nbsp;burst_4&nbsp;&nbsp;=&nbsp;(<span style="color: #d19a66;line-height: 26px;">0</span>&nbsp;=&gt;&nbsp;<span style="color: #d19a66;line-height: 26px;">1</span>&nbsp;[*<span style="color: #d19a66;line-height: 26px;">8</span>]&nbsp;&nbsp;=&gt;&nbsp;<span style="color: #d19a66;line-height: 26px;">0</span>);&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bins&nbsp;burst_8&nbsp;&nbsp;=&nbsp;(<span style="color: #d19a66;line-height: 26px;">0</span>&nbsp;=&gt;&nbsp;<span style="color: #d19a66;line-height: 26px;">1</span>&nbsp;[*<span style="color: #d19a66;line-height: 26px;">16</span>]&nbsp;=&gt;&nbsp;<span style="color: #d19a66;line-height: 26px;">0</span>);&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bins&nbsp;burst_16&nbsp;=&nbsp;(<span style="color: #d19a66;line-height: 26px;">0</span>&nbsp;=&gt;&nbsp;<span style="color: #d19a66;line-height: 26px;">1</span>&nbsp;[*<span style="color: #d19a66;line-height: 26px;">32</span>]&nbsp;=&gt;&nbsp;<span style="color: #d19a66;line-height: 26px;">0</span>);&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bins&nbsp;burst_32&nbsp;=&nbsp;(<span style="color: #d19a66;line-height: 26px;">0</span>&nbsp;=&gt;&nbsp;<span style="color: #d19a66;line-height: 26px;">1</span>&nbsp;[*<span style="color: #d19a66;line-height: 26px;">64</span>]&nbsp;=&gt;&nbsp;<span style="color: #d19a66;line-height: 26px;">0</span>);&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;penable:&nbsp;coverpoint&nbsp;penable&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bins&nbsp;single&nbsp;=&nbsp;(<span style="color: #d19a66;line-height: 26px;">0</span>&nbsp;=&gt;&nbsp;<span style="color: #d19a66;line-height: 26px;">1</span>&nbsp;=&gt;&nbsp;<span style="color: #d19a66;line-height: 26px;">0</span>&nbsp;[*<span style="color: #d19a66;line-height: 26px;">2</span>:<span style="color: #d19a66;line-height: 26px;">10</span>]&nbsp;=&gt;&nbsp;<span style="color: #d19a66;line-height: 26px;">1</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bins&nbsp;burst&nbsp;&nbsp;=&nbsp;(<span style="color: #d19a66;line-height: 26px;">0</span>&nbsp;=&gt;&nbsp;<span style="color: #d19a66;line-height: 26px;">1</span>&nbsp;=&gt;&nbsp;<span style="color: #d19a66;line-height: 26px;">0</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt;&nbsp;<span style="color: #d19a66;line-height: 26px;">1</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;endgroup<br><br>&nbsp;&nbsp;<span style="color: #5c6370;font-style: italic;line-height: 26px;">//&nbsp;APB&nbsp;write&nbsp;&amp;&nbsp;read&nbsp;order&nbsp;group</span><br>&nbsp;&nbsp;covergroup&nbsp;cg_apb_write_read_order_group&nbsp;@(posedge&nbsp;clk&nbsp;iff&nbsp;(rstn&nbsp;&amp;&amp;&nbsp;penable));<br>&nbsp;&nbsp;&nbsp;&nbsp;write_read_order:&nbsp;coverpoint&nbsp;pwrite{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bins&nbsp;write_write&nbsp;=&nbsp;(<span style="color: #d19a66;line-height: 26px;">1</span>&nbsp;=&gt;&nbsp;<span style="color: #d19a66;line-height: 26px;">1</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bins&nbsp;write_read&nbsp;&nbsp;=&nbsp;(<span style="color: #d19a66;line-height: 26px;">1</span>&nbsp;=&gt;&nbsp;<span style="color: #d19a66;line-height: 26px;">0</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bins&nbsp;read_write&nbsp;&nbsp;=&nbsp;(<span style="color: #d19a66;line-height: 26px;">0</span>&nbsp;=&gt;&nbsp;<span style="color: #d19a66;line-height: 26px;">1</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bins&nbsp;read_read&nbsp;&nbsp;&nbsp;=&nbsp;(<span style="color: #d19a66;line-height: 26px;">0</span>&nbsp;=&gt;&nbsp;<span style="color: #d19a66;line-height: 26px;">0</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<br>&nbsp;&nbsp;endgroup<br><br><br></code></pre>
  <figure data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;display: flex;flex-direction: column;justify-content: center;align-items: center;">
   <img class="rich_pages wxw-img" data-ratio="0.3888888888888889" src="http://file.custom.com/view/125794260327858176" data-type="png" data-w="1080" style="display: block;margin-right: auto;margin-left: auto;border-radius: 4px;margin-bottom: 25px;">
   <figcaption style="margin-top: 5px;text-align: center;color: rgb(136, 136, 136);font-size: 12px;font-family: PingFangSC-Light;">
    在这里插入图片描述
   </figcaption>
  </figure>
 </section>
 <p><span style="color: rgb(255, 218, 169);">本文来源：https://blog.csdn.net/qq_39794062/article/details/114573965</span></p>
 <p><span style="color: rgb(255, 218, 169);"><br></span></p>
 <p><br></p>
 <p><br></p>
 <section data-tool="mdnice编辑器" data-website="https://www.mdnice.com" style="padding-right: 10px;padding-left: 10px;outline: 0px;text-align: left;line-height: 1.6;letter-spacing: 0.034em;color: rgb(63, 63, 63);font-size: 16px;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif;visibility: visible;">
  <section style="outline: 0px;font-family: system-ui, -apple-system, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;visibility: visible;">
   <section style="margin-bottom: 8px;outline: 0px;letter-spacing: 0.544px;min-height: 1em;text-align: center;line-height: 1.6;">
    <section powered-by="xiumi.us" style="margin-bottom: 8px;outline: 0px;clear: both;min-height: 1em;line-height: 1.6;">
     <section style="margin-bottom: 8px;outline: 0px;clear: both;min-height: 1em;line-height: 1.6;">
      <section style="margin-bottom: 8px;outline: 0px;clear: both;min-height: 1em;line-height: 1.6;">
       <section style="margin-bottom: 8px;outline: 0px;clear: both;min-height: 1em;line-height: 1.6;">
        <section powered-by="xiumi.us" style="margin-bottom: 8px;outline: 0px;clear: both;min-height: 1em;line-height: 1.6;">
         <section style="margin-bottom: 8px;outline: 0px;clear: both;min-height: 1em;line-height: 1.6;">
          <section style="margin-bottom: 8px;outline: 0px;color: rgb(62, 62, 62);clear: both;min-height: 1em;line-height: 1.6;">
           <p style="margin-bottom: 0em;outline: 0px;"><strong style="outline: 0px;"><span style="outline: 0px;color: rgb(255, 76, 65);"><br style="outline: 0px;"></span></strong></p>
           <section data-mpa-template="t" mpa-from-tpl="t" style="outline: 0px;">
            <section data-mpa-template="t" data-mpa-template-id="139" data-mpa-category="模板" mpa-from-tpl="t" style="outline: 0px;">
             <section data-mpa-category="模板" data-mid="" mpa-from-tpl="t" style="padding-right: 9px;padding-left: 9px;outline: 0px;width: 578px;display: flex;flex-direction: column;justify-content: flex-start;align-items: center;">
              <section data-mid="" mpa-from-tpl="t" style="margin-bottom: -83px;outline: 0px;width: 560px;display: flex;flex-direction: row;align-items: flex-start;justify-content: space-between;">
               <section data-mid="" mpa-from-tpl="t" style="outline: 0px;width: 42px;height: 88px;border-top: 1px solid rgb(51, 51, 51);border-left: 1px solid rgb(51, 51, 51);">
                <br style="outline: 0px;">
               </section>
               <section data-mid="" mpa-from-tpl="t" style="outline: 0px;width: 10px;height: 10px;background: rgb(153, 153, 153);">
                <br style="outline: 0px;">
               </section>
              </section>
              <section data-mid="" mpa-from-tpl="t" style="padding-right: 25px;padding-left: 25px;outline: 0px;width: 560px;display: flex;flex-direction: column;justify-content: flex-start;align-items: center;z-index: 100;">
               <section data-mid="" mpa-from-tpl="t" style="outline: 0px;width: 510px;display: flex;flex-flow: row;align-items: center;justify-content: center;">
                <p data-mid="" mpa-is-content="t" style="outline: 0px;font-weight: bold;color: rgb(133, 189, 59);letter-spacing: 3px;word-break: break-all;">IC学习软件实战安装包</p>
                <p data-mid="" mpa-is-content="t" style="outline: 0px;font-weight: bold;color: rgb(133, 189, 59);letter-spacing: 3px;word-break: break-all;"><span style="outline: 0px;color: rgb(204, 204, 204);font-size: 12px;font-weight: 200;text-transform: uppercase;letter-spacing: normal;"><br style="outline: 0px;"></span></p>
                <p data-mid="" mpa-is-content="t" style="outline: 0px;font-weight: bold;color: rgb(133, 189, 59);letter-spacing: 3px;word-break: break-all;"><span style="outline: 0px;color: rgb(204, 204, 204);font-size: 12px;font-weight: 200;text-transform: uppercase;letter-spacing: normal;"></span></p>
               </section>
               <section data-mid="" mpa-from-tpl="t" style="outline: 0px;width: 510px;display: flex;flex-direction: column;align-items: center;justify-content: flex-start;">
                <p data-mid="" mpa-is-content="t" style="outline: 0px;width: 510px;font-size: 14px;color: rgb(53, 53, 53);word-break: break-all;"><br style="outline: 0px;"></p>
                <p style="outline: 0px;color: rgb(51, 51, 51);text-align: left;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif;letter-spacing: 0px;">肯定有人在找IC学习实战软件安装包</p>
                <p style="outline: 0px;color: rgb(51, 51, 51);text-align: left;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif;letter-spacing: 0px;">酒酒联合<strong style="outline: 0px;">IC修真院</strong>给大家争取到了这个福利</p>
                <p style="outline: 0px;color: rgb(51, 51, 51);text-align: left;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif;letter-spacing: 0px;">内含EDA工具虚拟机(最全)+数字IC设计_EDA软件安装包等软件合集</p>
                <p style="outline: 0px;color: rgb(51, 51, 51);text-align: left;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif;letter-spacing: 0px;"><br style="outline: 0px;"></p>
                <p style="outline: 0px;color: rgb(51, 51, 51);text-align: left;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif;letter-spacing: 0px;"><strong style="outline: 0px;letter-spacing: 0.544px;text-align: center;color: rgb(7, 12, 4);word-spacing: 0.8px;"><span style="outline: 0px;font-size: 12pt;font-family: 宋体;color: rgb(220, 155, 4);"><img class="rich_pages wxw-img" data-ratio="1" data-type="png" data-w="75" width="53px" src="http://file.custom.com/view/125794260226146304" style="outline: 0px;visibility: visible !important;width: 53px !important;"><span style="outline: 0px;color: rgb(51, 51, 51);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif;letter-spacing: normal;">扫码</span><span style="outline: 0px;color: rgb(51, 51, 51);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif;letter-spacing: normal;">免费领，先</span><span style="outline: 0px;color: rgb(51, 51, 51);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif;letter-spacing: normal;">到先得</span></span></strong><br style="outline: 0px;"></p>
                <p style="outline: 0px;color: rgb(51, 51, 51);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif;letter-spacing: 0px;"><img class="rich_pages wxw-img" data-galleryid="" data-ratio="1.7777777777777777" data-s="300,640" data-type="jpeg" data-w="450" width="244px" src="http://file.custom.com/view/125794260270186496" style="outline: 0px;visibility: visible !important;width: 244px !important;"></p>
               </section>
              </section>
              <section data-mid="" mpa-from-tpl="t" style="margin-top: -81px;outline: 0px;width: 560px;display: flex;flex-direction: row;justify-content: flex-end;">
               <section data-mid="" mpa-from-tpl="t" style="outline: 0px;width: 42px;height: 88px;border-bottom: 1px solid rgb(51, 51, 51);border-right: 1px solid rgb(51, 51, 51);">
                <br style="outline: 0px;">
               </section>
              </section>
             </section>
            </section>
           </section>
          </section>
         </section>
        </section>
       </section>
      </section>
     </section>
    </section>
   </section>
  </section>
 </section>
 <p><br></p>
 <p style="display: none;">
  <mp-style-type data-value="3"></mp-style-type></p>
</div></body></html>